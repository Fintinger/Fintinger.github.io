<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>PHPå¼€å‘éªŒè¯ç ç±» | Archai&#39;s home</title>
<meta name="keywords" content="PHP" />
<meta name="description" content="åˆ©ç”¨phpä¸­çš„GDåº“å¯ä»¥å®ŒæˆéªŒè¯ç ç±»çš„å¼€å‘ã€‚åç›¾äººæ•™ç¨‹
 PHPåˆ›å»ºå›¾åƒæ­¥éª¤ å‘é€HTTPå¤´ä¿¡æ¯ï¼Œå£°æ˜å†…å®¹ä¸ºå›¾åƒ header(&#39;Content-type:image/gif&#39;); header(&#39;Content-type:image/jpeg&#39;); header(&#39;Content-type:image/png&#39;); é€šè¿‡è®¾ç½®å¤´ä¿¡æ¯è®©æµè§ˆå™¨æ¸²æŸ“å‡ºå›¾åƒï¼Œè€Œä¸æ˜¯HTMLç­‰å…¶ä»–ç±»å‹
åˆ›å»ºç”»å¸ƒ imageCreateTrueColor(width,height); width &amp; height ç”»å¸ƒå®½é«˜ï¼Œå³ä¸ºè¾“å‡ºå›¾ç‰‡çš„å°ºå¯¸,è¿”å›ä¸ºsource ç±»å‹ï¼Œåç»­æ“ä½œéƒ½æ˜¯é’ˆå¯¹è¿™ä¸ªèµ„æºå±•å¼€ã€‚
åˆ›å»ºç»˜å›¾æ‰€éœ€è¦çš„é¢œè‰² imageColorAllocate(img_resource,R,G,B); é¢œè‰²ä»å±äºåˆ›å»ºç”»å¸ƒäº§ç”Ÿçš„å›¾åƒèµ„æºè€Œå­˜åœ¨ï¼Œåé¢ä¸‰ä¸ªå€¼åˆ†åˆ«ä¸ºçº¢ç»¿è“ä¸‰ä¸ªé€šé“çš„å€¼ï¼Œä¸ºintç±»å‹,åœ¨0â€”255ä¹‹é—´ã€‚
ç»˜å›¾ï¼ˆå¡«å……ç”»å¸ƒã€ç”»åœ†ã€ç”»æ–¹å—ã€ç”»çº¿æ¡ã€ç”»å¸ƒä¸Šå†™å­—ï¼‰ ğŸ‘‰ å¡«å……ç”»å¸ƒ(ç”»å¸ƒèƒŒæ™¯)
imageFill(img_resource,x,y,color); ğŸ‘‰ ç”»åœ†
//ç»˜åˆ¶ç©ºå¿ƒåœ†å½¢ imageEllipse(img_res,x,y,w,h,color); //ç»˜åˆ¶å¡«å……å¥½çš„å®å¿ƒåœ† imageFilledEllipse(img_res,x,y,w,h,color); ç»˜åˆ¶ åœ†å¿ƒ(x,y) å®½ xï¼Œé«˜ hï¼Œçš„åœ†
ğŸ‘‰ ç”»æ–¹
//ç©ºå¿ƒçŸ©å½¢ imageRectangle(img_res,x1,y1,x2,y2,color); //å®å¿ƒçŸ©å½¢ imageFilledRectangle (img_res,x1,y1,x2,y2,color); (x1,y1)ä¸ºå·¦ä¸Šè§’åæ ‡ï¼Œ (x2,y2)ä¸ºå³ä¸‹è§’åæ ‡
ğŸ‘‰ç”»çº¿æ¡
imageLine(img_res,x1,y1,x2,y2,color)(x1,y1)ä¸(x2,y2)ä¸¤ç‚¹ç¡®å®šçš„ç›´çº¿ã€‚
ğŸ‘‰ ç»˜åˆ¶åƒç´ (ç‚¹)
imagesetpixel ( img_res , x , y , color ) ğŸ‘‰ è¾“å…¥æ–‡æœ¬
imagettftext (img_res , size , angle , x , y , color , fontfile ,text ) å›¾åƒèµ„æºï¼Œå­—ä½“å°ºå¯¸ï¼Œè§’åº¦ï¼Œç¬¬ä¸€ä¸ªå­—ç¬¦çš„åŸºæœ¬ç‚¹ï¼ˆå¤§æ¦‚æ˜¯å­—ç¬¦çš„å·¦ä¸‹è§’ï¼‰ï¼ŒY åæ ‡ï¼ˆå­—ä½“åŸºçº¿çš„ä½ç½®ï¼‰ï¼Œé¢œè‰² ï¼Œå­—ä½“æ–‡ä»¶ç»å¯¹è·¯å¾„(realpath($path)è·å–)ï¼Œæ–‡æœ¬å­—ç¬¦ä¸²ï¼ˆUTF-8 ç¼–ç ï¼‰">
<meta name="author" content="Archai">
<link rel="canonical" href="https://www.fintinger.site/posts/2020/10/03/" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.c88963fe2d79462000fd0fb1b3737783c32855d340583e4523343f8735c787f0.css" integrity="sha256-yIlj/i15RiAA/Q&#43;xs3N3g8MoVdNAWD5FIzQ/hzXHh/A=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js" integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5&#43;kdJvBz5iKbt6B5PJI="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://gitee.com/fintinger/figure-bed/raw/master//images/20210530080206.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://www.fintinger.site/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://www.fintinger.site/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://www.fintinger.site/apple-touch-icon.png">
<link rel="mask-icon" href="https://www.fintinger.site/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><meta property="og:title" content="PHPå¼€å‘éªŒè¯ç ç±»" />
<meta property="og:description" content="åˆ©ç”¨phpä¸­çš„GDåº“å¯ä»¥å®ŒæˆéªŒè¯ç ç±»çš„å¼€å‘ã€‚åç›¾äººæ•™ç¨‹
 PHPåˆ›å»ºå›¾åƒæ­¥éª¤ å‘é€HTTPå¤´ä¿¡æ¯ï¼Œå£°æ˜å†…å®¹ä¸ºå›¾åƒ header(&#39;Content-type:image/gif&#39;); header(&#39;Content-type:image/jpeg&#39;); header(&#39;Content-type:image/png&#39;); é€šè¿‡è®¾ç½®å¤´ä¿¡æ¯è®©æµè§ˆå™¨æ¸²æŸ“å‡ºå›¾åƒï¼Œè€Œä¸æ˜¯HTMLç­‰å…¶ä»–ç±»å‹
åˆ›å»ºç”»å¸ƒ imageCreateTrueColor(width,height); width &amp; height ç”»å¸ƒå®½é«˜ï¼Œå³ä¸ºè¾“å‡ºå›¾ç‰‡çš„å°ºå¯¸,è¿”å›ä¸ºsource ç±»å‹ï¼Œåç»­æ“ä½œéƒ½æ˜¯é’ˆå¯¹è¿™ä¸ªèµ„æºå±•å¼€ã€‚
åˆ›å»ºç»˜å›¾æ‰€éœ€è¦çš„é¢œè‰² imageColorAllocate(img_resource,R,G,B); é¢œè‰²ä»å±äºåˆ›å»ºç”»å¸ƒäº§ç”Ÿçš„å›¾åƒèµ„æºè€Œå­˜åœ¨ï¼Œåé¢ä¸‰ä¸ªå€¼åˆ†åˆ«ä¸ºçº¢ç»¿è“ä¸‰ä¸ªé€šé“çš„å€¼ï¼Œä¸ºintç±»å‹,åœ¨0â€”255ä¹‹é—´ã€‚
ç»˜å›¾ï¼ˆå¡«å……ç”»å¸ƒã€ç”»åœ†ã€ç”»æ–¹å—ã€ç”»çº¿æ¡ã€ç”»å¸ƒä¸Šå†™å­—ï¼‰ ğŸ‘‰ å¡«å……ç”»å¸ƒ(ç”»å¸ƒèƒŒæ™¯)
imageFill(img_resource,x,y,color); ğŸ‘‰ ç”»åœ†
//ç»˜åˆ¶ç©ºå¿ƒåœ†å½¢ imageEllipse(img_res,x,y,w,h,color); //ç»˜åˆ¶å¡«å……å¥½çš„å®å¿ƒåœ† imageFilledEllipse(img_res,x,y,w,h,color); ç»˜åˆ¶ åœ†å¿ƒ(x,y) å®½ xï¼Œé«˜ hï¼Œçš„åœ†
ğŸ‘‰ ç”»æ–¹
//ç©ºå¿ƒçŸ©å½¢ imageRectangle(img_res,x1,y1,x2,y2,color); //å®å¿ƒçŸ©å½¢ imageFilledRectangle (img_res,x1,y1,x2,y2,color); (x1,y1)ä¸ºå·¦ä¸Šè§’åæ ‡ï¼Œ (x2,y2)ä¸ºå³ä¸‹è§’åæ ‡
ğŸ‘‰ç”»çº¿æ¡
imageLine(img_res,x1,y1,x2,y2,color)(x1,y1)ä¸(x2,y2)ä¸¤ç‚¹ç¡®å®šçš„ç›´çº¿ã€‚
ğŸ‘‰ ç»˜åˆ¶åƒç´ (ç‚¹)
imagesetpixel ( img_res , x , y , color ) ğŸ‘‰ è¾“å…¥æ–‡æœ¬
imagettftext (img_res , size , angle , x , y , color , fontfile ,text ) å›¾åƒèµ„æºï¼Œå­—ä½“å°ºå¯¸ï¼Œè§’åº¦ï¼Œç¬¬ä¸€ä¸ªå­—ç¬¦çš„åŸºæœ¬ç‚¹ï¼ˆå¤§æ¦‚æ˜¯å­—ç¬¦çš„å·¦ä¸‹è§’ï¼‰ï¼ŒY åæ ‡ï¼ˆå­—ä½“åŸºçº¿çš„ä½ç½®ï¼‰ï¼Œé¢œè‰² ï¼Œå­—ä½“æ–‡ä»¶ç»å¯¹è·¯å¾„(realpath($path)è·å–)ï¼Œæ–‡æœ¬å­—ç¬¦ä¸²ï¼ˆUTF-8 ç¼–ç ï¼‰" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.fintinger.site/posts/2020/10/03/" /><meta property="og:image" content="https://gitee.com/fintinger/figure-bed/raw/master//images/20210803221048.jpeg"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-10-03T00:00:00&#43;00:00" />
<meta property="article:modified_time" content="2020-10-03T00:00:00&#43;00:00" /><meta property="og:site_name" content="Archai&#39;s home" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://gitee.com/fintinger/figure-bed/raw/master//images/20210803221048.jpeg"/>

<meta name="twitter:title" content="PHPå¼€å‘éªŒè¯ç ç±»"/>
<meta name="twitter:description" content="åˆ©ç”¨phpä¸­çš„GDåº“å¯ä»¥å®ŒæˆéªŒè¯ç ç±»çš„å¼€å‘ã€‚åç›¾äººæ•™ç¨‹
 PHPåˆ›å»ºå›¾åƒæ­¥éª¤ å‘é€HTTPå¤´ä¿¡æ¯ï¼Œå£°æ˜å†…å®¹ä¸ºå›¾åƒ header(&#39;Content-type:image/gif&#39;); header(&#39;Content-type:image/jpeg&#39;); header(&#39;Content-type:image/png&#39;); é€šè¿‡è®¾ç½®å¤´ä¿¡æ¯è®©æµè§ˆå™¨æ¸²æŸ“å‡ºå›¾åƒï¼Œè€Œä¸æ˜¯HTMLç­‰å…¶ä»–ç±»å‹
åˆ›å»ºç”»å¸ƒ imageCreateTrueColor(width,height); width &amp; height ç”»å¸ƒå®½é«˜ï¼Œå³ä¸ºè¾“å‡ºå›¾ç‰‡çš„å°ºå¯¸,è¿”å›ä¸ºsource ç±»å‹ï¼Œåç»­æ“ä½œéƒ½æ˜¯é’ˆå¯¹è¿™ä¸ªèµ„æºå±•å¼€ã€‚
åˆ›å»ºç»˜å›¾æ‰€éœ€è¦çš„é¢œè‰² imageColorAllocate(img_resource,R,G,B); é¢œè‰²ä»å±äºåˆ›å»ºç”»å¸ƒäº§ç”Ÿçš„å›¾åƒèµ„æºè€Œå­˜åœ¨ï¼Œåé¢ä¸‰ä¸ªå€¼åˆ†åˆ«ä¸ºçº¢ç»¿è“ä¸‰ä¸ªé€šé“çš„å€¼ï¼Œä¸ºintç±»å‹,åœ¨0â€”255ä¹‹é—´ã€‚
ç»˜å›¾ï¼ˆå¡«å……ç”»å¸ƒã€ç”»åœ†ã€ç”»æ–¹å—ã€ç”»çº¿æ¡ã€ç”»å¸ƒä¸Šå†™å­—ï¼‰ ğŸ‘‰ å¡«å……ç”»å¸ƒ(ç”»å¸ƒèƒŒæ™¯)
imageFill(img_resource,x,y,color); ğŸ‘‰ ç”»åœ†
//ç»˜åˆ¶ç©ºå¿ƒåœ†å½¢ imageEllipse(img_res,x,y,w,h,color); //ç»˜åˆ¶å¡«å……å¥½çš„å®å¿ƒåœ† imageFilledEllipse(img_res,x,y,w,h,color); ç»˜åˆ¶ åœ†å¿ƒ(x,y) å®½ xï¼Œé«˜ hï¼Œçš„åœ†
ğŸ‘‰ ç”»æ–¹
//ç©ºå¿ƒçŸ©å½¢ imageRectangle(img_res,x1,y1,x2,y2,color); //å®å¿ƒçŸ©å½¢ imageFilledRectangle (img_res,x1,y1,x2,y2,color); (x1,y1)ä¸ºå·¦ä¸Šè§’åæ ‡ï¼Œ (x2,y2)ä¸ºå³ä¸‹è§’åæ ‡
ğŸ‘‰ç”»çº¿æ¡
imageLine(img_res,x1,y1,x2,y2,color)(x1,y1)ä¸(x2,y2)ä¸¤ç‚¹ç¡®å®šçš„ç›´çº¿ã€‚
ğŸ‘‰ ç»˜åˆ¶åƒç´ (ç‚¹)
imagesetpixel ( img_res , x , y , color ) ğŸ‘‰ è¾“å…¥æ–‡æœ¬
imagettftext (img_res , size , angle , x , y , color , fontfile ,text ) å›¾åƒèµ„æºï¼Œå­—ä½“å°ºå¯¸ï¼Œè§’åº¦ï¼Œç¬¬ä¸€ä¸ªå­—ç¬¦çš„åŸºæœ¬ç‚¹ï¼ˆå¤§æ¦‚æ˜¯å­—ç¬¦çš„å·¦ä¸‹è§’ï¼‰ï¼ŒY åæ ‡ï¼ˆå­—ä½“åŸºçº¿çš„ä½ç½®ï¼‰ï¼Œé¢œè‰² ï¼Œå­—ä½“æ–‡ä»¶ç»å¯¹è·¯å¾„(realpath($path)è·å–)ï¼Œæ–‡æœ¬å­—ç¬¦ä¸²ï¼ˆUTF-8 ç¼–ç ï¼‰"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Posts",
      "item": "https://www.fintinger.site/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "PHPå¼€å‘éªŒè¯ç ç±»",
      "item": "https://www.fintinger.site/posts/2020/10/03/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "PHPå¼€å‘éªŒè¯ç ç±»",
  "name": "PHPå¼€å‘éªŒè¯ç ç±»",
  "description": "åˆ©ç”¨phpä¸­çš„GDåº“å¯ä»¥å®ŒæˆéªŒè¯ç ç±»çš„å¼€å‘ã€‚åç›¾äººæ•™ç¨‹\n PHPåˆ›å»ºå›¾åƒæ­¥éª¤ å‘é€HTTPå¤´ä¿¡æ¯ï¼Œå£°æ˜å†…å®¹ä¸ºå›¾åƒ header(\u0026#39;Content-type:image/gif\u0026#39;); header(\u0026#39;Content-type:image/jpeg\u0026#39;); header(\u0026#39;Content-type:image/png\u0026#39;); é€šè¿‡è®¾ç½®å¤´ä¿¡æ¯è®©æµè§ˆå™¨æ¸²æŸ“å‡ºå›¾åƒï¼Œè€Œä¸æ˜¯HTMLç­‰å…¶ä»–ç±»å‹\nåˆ›å»ºç”»å¸ƒ imageCreateTrueColor(width,height); width \u0026amp; height ç”»å¸ƒå®½é«˜ï¼Œå³ä¸ºè¾“å‡ºå›¾ç‰‡çš„å°ºå¯¸,è¿”å›ä¸ºsource ç±»å‹ï¼Œåç»­æ“ä½œéƒ½æ˜¯é’ˆå¯¹è¿™ä¸ªèµ„æºå±•å¼€ã€‚\nåˆ›å»ºç»˜å›¾æ‰€éœ€è¦çš„é¢œè‰² imageColorAllocate(img_resource,R,G,B); é¢œè‰²ä»å±äºåˆ›å»ºç”»å¸ƒäº§ç”Ÿçš„å›¾åƒèµ„æºè€Œå­˜åœ¨ï¼Œåé¢ä¸‰ä¸ªå€¼åˆ†åˆ«ä¸ºçº¢ç»¿è“ä¸‰ä¸ªé€šé“çš„å€¼ï¼Œä¸ºintç±»å‹,åœ¨0â€”255ä¹‹é—´ã€‚\nç»˜å›¾ï¼ˆå¡«å……ç”»å¸ƒã€ç”»åœ†ã€ç”»æ–¹å—ã€ç”»çº¿æ¡ã€ç”»å¸ƒä¸Šå†™å­—ï¼‰ ğŸ‘‰ å¡«å……ç”»å¸ƒ(ç”»å¸ƒèƒŒæ™¯)\nimageFill(img_resource,x,y,color); ğŸ‘‰ ç”»åœ†\n//ç»˜åˆ¶ç©ºå¿ƒåœ†å½¢ imageEllipse(img_res,x,y,w,h,color); //ç»˜åˆ¶å¡«å……å¥½çš„å®å¿ƒåœ† imageFilledEllipse(img_res,x,y,w,h,color); ç»˜åˆ¶ åœ†å¿ƒ(x,y) å®½ xï¼Œé«˜ hï¼Œçš„åœ†\nğŸ‘‰ ç”»æ–¹\n//ç©ºå¿ƒçŸ©å½¢ imageRectangle(img_res,x1,y1,x2,y2,color); //å®å¿ƒçŸ©å½¢ imageFilledRectangle (img_res,x1,y1,x2,y2,color); (x1,y1)ä¸ºå·¦ä¸Šè§’åæ ‡ï¼Œ (x2,y2)ä¸ºå³ä¸‹è§’åæ ‡\nğŸ‘‰ç”»çº¿æ¡\nimageLine(img_res,x1,y1,x2,y2,color)\r(x1,y1)ä¸(x2,y2)ä¸¤ç‚¹ç¡®å®šçš„ç›´çº¿ã€‚\nğŸ‘‰ ç»˜åˆ¶åƒç´ (ç‚¹)\nimagesetpixel ( img_res , x , y , color ) ğŸ‘‰ è¾“å…¥æ–‡æœ¬\nimagettftext (img_res , size , angle , x , y , color , fontfile ,text ) å›¾åƒèµ„æºï¼Œå­—ä½“å°ºå¯¸ï¼Œè§’åº¦ï¼Œç¬¬ä¸€ä¸ªå­—ç¬¦çš„åŸºæœ¬ç‚¹ï¼ˆå¤§æ¦‚æ˜¯å­—ç¬¦çš„å·¦ä¸‹è§’ï¼‰ï¼ŒY åæ ‡ï¼ˆå­—ä½“åŸºçº¿çš„ä½ç½®ï¼‰ï¼Œé¢œè‰² ï¼Œå­—ä½“æ–‡ä»¶ç»å¯¹è·¯å¾„(realpath($path)è·å–)ï¼Œæ–‡æœ¬å­—ç¬¦ä¸²ï¼ˆUTF-8 ç¼–ç ï¼‰",
  "keywords": [
    "PHP"
  ],
  "articleBody": " åˆ©ç”¨phpä¸­çš„GDåº“å¯ä»¥å®ŒæˆéªŒè¯ç ç±»çš„å¼€å‘ã€‚åç›¾äººæ•™ç¨‹\n PHPåˆ›å»ºå›¾åƒæ­¥éª¤ å‘é€HTTPå¤´ä¿¡æ¯ï¼Œå£°æ˜å†…å®¹ä¸ºå›¾åƒ header('Content-type:image/gif'); header('Content-type:image/jpeg'); header('Content-type:image/png'); é€šè¿‡è®¾ç½®å¤´ä¿¡æ¯è®©æµè§ˆå™¨æ¸²æŸ“å‡ºå›¾åƒï¼Œè€Œä¸æ˜¯HTMLç­‰å…¶ä»–ç±»å‹\nåˆ›å»ºç”»å¸ƒ imageCreateTrueColor(width,height); width \u0026 height ç”»å¸ƒå®½é«˜ï¼Œå³ä¸ºè¾“å‡ºå›¾ç‰‡çš„å°ºå¯¸,è¿”å›ä¸ºsource ç±»å‹ï¼Œåç»­æ“ä½œéƒ½æ˜¯é’ˆå¯¹è¿™ä¸ªèµ„æºå±•å¼€ã€‚\nåˆ›å»ºç»˜å›¾æ‰€éœ€è¦çš„é¢œè‰² imageColorAllocate(img_resource,R,G,B); é¢œè‰²ä»å±äºåˆ›å»ºç”»å¸ƒäº§ç”Ÿçš„å›¾åƒèµ„æºè€Œå­˜åœ¨ï¼Œåé¢ä¸‰ä¸ªå€¼åˆ†åˆ«ä¸ºçº¢ç»¿è“ä¸‰ä¸ªé€šé“çš„å€¼ï¼Œä¸ºintç±»å‹,åœ¨0â€”255ä¹‹é—´ã€‚\nç»˜å›¾ï¼ˆå¡«å……ç”»å¸ƒã€ç”»åœ†ã€ç”»æ–¹å—ã€ç”»çº¿æ¡ã€ç”»å¸ƒä¸Šå†™å­—ï¼‰ ğŸ‘‰ å¡«å……ç”»å¸ƒ(ç”»å¸ƒèƒŒæ™¯)\nimageFill(img_resource,x,y,color); ğŸ‘‰ ç”»åœ†\n//ç»˜åˆ¶ç©ºå¿ƒåœ†å½¢ imageEllipse(img_res,x,y,w,h,color); //ç»˜åˆ¶å¡«å……å¥½çš„å®å¿ƒåœ† imageFilledEllipse(img_res,x,y,w,h,color); ç»˜åˆ¶ åœ†å¿ƒ(x,y) å®½ xï¼Œé«˜ hï¼Œçš„åœ†\nğŸ‘‰ ç”»æ–¹\n//ç©ºå¿ƒçŸ©å½¢ imageRectangle(img_res,x1,y1,x2,y2,color); //å®å¿ƒçŸ©å½¢ imageFilledRectangle (img_res,x1,y1,x2,y2,color); (x1,y1)ä¸ºå·¦ä¸Šè§’åæ ‡ï¼Œ (x2,y2)ä¸ºå³ä¸‹è§’åæ ‡\nğŸ‘‰ç”»çº¿æ¡\nimageLine(img_res,x1,y1,x2,y2,color)\r(x1,y1)ä¸(x2,y2)ä¸¤ç‚¹ç¡®å®šçš„ç›´çº¿ã€‚\nğŸ‘‰ ç»˜åˆ¶åƒç´ (ç‚¹)\nimagesetpixel ( img_res , x , y , color ) ğŸ‘‰ è¾“å…¥æ–‡æœ¬\nimagettftext (img_res , size , angle , x , y , color , fontfile ,text ) å›¾åƒèµ„æºï¼Œå­—ä½“å°ºå¯¸ï¼Œè§’åº¦ï¼Œç¬¬ä¸€ä¸ªå­—ç¬¦çš„åŸºæœ¬ç‚¹ï¼ˆå¤§æ¦‚æ˜¯å­—ç¬¦çš„å·¦ä¸‹è§’ï¼‰ï¼ŒY åæ ‡ï¼ˆå­—ä½“åŸºçº¿çš„ä½ç½®ï¼‰ï¼Œé¢œè‰² ï¼Œå­—ä½“æ–‡ä»¶ç»å¯¹è·¯å¾„(realpath($path)è·å–)ï¼Œæ–‡æœ¬å­—ç¬¦ä¸²ï¼ˆUTF-8 ç¼–ç ï¼‰\n âœ¨æ–‡æœ¬ç›’å­ï¼Ÿ\n imagettfbbox ( size , angle , fontfile , text ); è¿”å›ä¸€ä¸ªå«æœ‰ 8 ä¸ªå•å…ƒçš„æ•°ç»„è¡¨ç¤ºäº†æ–‡æœ¬å¤–æ¡†çš„å››ä¸ªè§’ï¼Œå¾—åˆ°æ–‡æœ¬èŒƒå›´çš„ç›’å­å¤§å°ï¼Œå¯ä»¥æ–¹ä¾¿æ§åˆ¶æ–‡æœ¬è¾“å‡ºä½ç½®ï¼š\n   å˜é‡ ä½ç½®     0 å·¦ä¸‹è§’ X ä½ç½®   1 å·¦ä¸‹è§’ Y ä½ç½®   2 å³ä¸‹è§’ X ä½ç½®   3 å³ä¸‹è§’ Y ä½ç½®   4 å³ä¸Šè§’ X ä½ç½®   5 å³ä¸Šè§’ Y ä½ç½®   6 å·¦ä¸Šè§’ X ä½ç½®   7 å·¦ä¸Šè§’ Y ä½ç½®    è¾“å‡ºå›¾åƒ imagegif(img_resource[,filename]); imagejpeg(img_resource[,filename]); imagepng(img_resource[,filename]); imagebmp(img_resource[,filename]); å½“è®¾ç½®ç¬¬äºŒä¸ªå‚æ•°æ—¶è¡¨ç¤ºå‚¨å­˜æ–‡ä»¶ï¼Œå¦‚æœå­˜åœ¨åŒåæ–‡ä»¶ä¼šè¦†ç›–\né‡Šæ”¾ç”»å¸ƒèµ„æº imageDestroy(img_resource); å›¾åƒè¾“å‡ºå®Œæ¯•åŠæ—¶é‡Šæ”¾èµ„æºï¼ŒæŠŠå†…å­˜ç©ºé—´ç•™ç»™æ›´éœ€è¦çš„ç¨‹åºã€‚\néªŒè¯ç ç±» Verificationcodeç±»  ç»˜åˆ¶ç”»å¸ƒï¼Œè®¾ç½®èƒŒæ™¯è‰²ï¼Œå…ˆå†™å…¥éšæœºæ–‡æœ¬ï¼Œç„¶åç»˜åˆ¶éšæœºå¹²æ‰°çº¿ï¼Œå¹²æ‰°ç‚¹å°±å¯\n php class Verificationcode { protected $width; protected $height; protected $len; public $imgsource; protected $size; protected $fontfile; protected $rescode; public function __construct($w = 200, $h = 50, $len = 4, $size = null) { $this-width = $w; $this-height = $h; $this-len = $len; $this-size = is_null($size) ? $h * 0.4 : $size; $this-fontfile = realpath(\"source.ttf\"); } public function render() { $this-bg(); $this-line();//æ–‡å­—ä¸‹  $this-text(); $this-line();//æ–‡å­—ä¸Š  $this-pix(); $this-show(); return $this-rescode; } //ç»˜åˆ¶ç”»å¸ƒ  private function bg() { $img = imageCreateTrueColor($this-width, $this-height); $this-imgsource = $img; imagefill( $img, 0, 0, imageColorAllocate($img, 120, 120, 120) ); } //ç»˜åˆ¶éšæœºçº¿æ¡  private function line() { for ($i = 0; $i  3; $i++) { imagesetthickness($this-imgsource, mt_rand(1, 3)); imageLine( $this-imgsource, mt_rand(0, $this-width), mt_rand(0, $this-height), mt_rand(0, $this-width), mt_rand(0, $this-height), $this-ran_color() ); } } //ç»˜åˆ¶å¹²æ‰°ç‚¹  private function pix() { for ($i = 0; $i  800; $i++) { imagesetpixel( $this-imgsource, mt_rand(0, $this-width), mt_rand(0, $this-height), $this-ran_color() ); } } //éšæœºæ–‡æœ¬  private function text() { $range = \"abcdefghijklmnopqrstuvwxyz0123456789\"; $code = ''; for ($i = 0; $i  $this-len; $i++) { $text = $range[mt_rand(0, strlen($range) - 1)]; $box = imagettfbbox($this-size, 0, $this-fontfile, $range[$i]); imagettftext( $this-imgsource, $this-size, mt_rand(-30, 30), ($this-width / $this-len) * $i + 10, $this-height / 2 + ($box[0] - $box[7]) / 2, $this-ran_text_color(), $this-fontfile, strtoupper($text) ); $code .= strtoupper($text); } $this-rescode = $code; } //è®¾ç½®å¤´ä¿¡æ¯å¹¶ä¸”è¾“å‡ºpng  private function show() { header('Content-type:image/png'); imagepng($this-imgsource); } private function ran_color() { return imageColorAllocate( $this-imgsource, mt_rand(0, 255), mt_rand(0, 255), mt_rand(0, 255), ); } private function ran_text_color() { return imageColorAllocate( $this-imgsource, mt_rand(0, 80), mt_rand(0, 80), mt_rand(0, 80), ); } } è¯´æ˜ï¼š\n å¦‚æœä¸è®¾ç½®å‚æ•°ï¼Œé»˜è®¤å›¾ç‰‡å°ºå¯¸ä¸º200Ã—50ï¼ŒéªŒè¯ç é•¿åº¦ä¸º4ï¼Œå­—ä½“ä¸º (0.4*å›¾ç‰‡é«˜åº¦) é€šè¿‡è®¡ç®—ä½¿å¾—æ–‡æœ¬å§‹ç»ˆå¤„åœ¨å‚ç›´å±…ä¸­ï¼Œæ°´å¹³åˆ†æ•£å¯¹é½çš„çŠ¶æ€  åç«¯ä½¿ç”¨ âš¡server.php\nphp //å¼•å…¥æ¸²æŸ“éªŒè¯ç å›¾ç‰‡ï¼Œå¹¶å°†è¿™æ¬¡è¿”å›çš„éªŒè¯ç å­˜åˆ°sessionä¸­ include \"Verificationcode.php\"; session_start();//sessionå¼€å§‹ä¹‹å‰ä¸èƒ½æœ‰è¾“å‡º $code = new Verificationcode(); $res = $code-render(); $_SESSION[\"captcha\"]=$res; imageDestroy($code-imgsource); è¯´æ˜ï¼š\n è°ƒç”¨render()å‡½æ•°ï¼Œå³å¯ç»˜åˆ¶å‡ºéªŒè¯ç å›¾ç‰‡ï¼Œå¹¶è¿”å›è¿™æ¬¡çš„éªŒè¯ç å­—ç¬¦ä¸²ã€‚ é€šè¿‡å°†è¿”å›çš„éªŒè¯ç å­—ç¬¦ä¸²å­˜å…¥sessionä¸­ï¼Œå¯ä»¥è¿›è¡Œåç»­éªŒè¯æ“ä½œ  å‰ç«¯ä½¿ç”¨ img src=\"server.php\" alt=\"\" onclick=\"this.src='server.php?'+Math.random()\" âœ¨ å¯ä»¥å°†æ•´ä¸ªformè¡¨å•æäº¤è‡³phpåç«¯ï¼Œç„¶åé€šè¿‡sessionä¸­å­˜å‚¨çš„éªŒè¯ç å­—ç¬¦ä¸²è¿›è¡ŒéªŒè¯ï¼Œä¾‹å¦‚\nform action=\"check.php\" method=\"post\" enctype=\"multipart/form-data\" table tr tdinput type=\"text\" placeholder=\"è¯·è¾“å…¥éªŒè¯ç \" name=\"captcha\" tdimg src=\"server.php\" alt=\"\" onclick=\"this.src='server.php?'+Math.random()\" td tr table buttonç¡®å®šbutton form âš¡check.php\nphp session_start(); include \"main.html\"; if (@strtoupper($_POST[\"captcha\"])==@$_SESSION[\"captcha\"]){ echo \"éªŒè¯é€šè¿‡\n\"; }else{ echo \"éªŒè¯å¤±è´¥ï¼\n\"; } ğŸ‰ğŸ‰ğŸ‰\n",
  "wordCount" : "454",
  "inLanguage": "en",
  "datePublished": "2020-10-03T00:00:00Z",
  "dateModified": "2020-10-03T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "Archai"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://www.fintinger.site/posts/2020/10/03/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Archai's home",
    "logo": {
      "@type": "ImageObject",
      "url": "https://gitee.com/fintinger/figure-bed/raw/master//images/20210530080206.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://www.fintinger.site" accesskey="h" title="ğŸ›–Home (Alt + H)">ğŸ›–Home</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://www.fintinger.site/posts/" title="PostsğŸ“‘">
                    <span>PostsğŸ“‘</span>
                </a>
            </li>
            <li>
                <a href="https://www.fintinger.site/categories/" title="CategoriesğŸ›’">
                    <span>CategoriesğŸ›’</span>
                </a>
            </li>
            <li>
                <a href="https://www.fintinger.site/tags/" title="TagsğŸ·ï¸">
                    <span>TagsğŸ·ï¸</span>
                </a>
            </li>
            <li>
                <a href="https://www.fintinger.site/search/" title="SearchğŸ” (Alt &#43; /)" accesskey=/>
                    <span>SearchğŸ”</span>
                </a>
            </li>
            <li>
                <a href="https://www.fintinger.site/archives/" title="TimelineğŸ•°ï¸">
                    <span>TimelineğŸ•°ï¸</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://www.fintinger.site">Home</a>&nbsp;Â»&nbsp;<a href="https://www.fintinger.site/posts/">Posts</a></div>
    <h1 class="post-title">
      PHPå¼€å‘éªŒè¯ç ç±»
    </h1>
    <div class="post-meta"><span title='2020-10-03 00:00:00 +0000 UTC'>October 3, 2020</span>&nbsp;Â·&nbsp;3 min&nbsp;Â·&nbsp;Archai

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#php%e5%88%9b%e5%bb%ba%e5%9b%be%e5%83%8f%e6%ad%a5%e9%aa%a4" aria-label="PHPåˆ›å»ºå›¾åƒæ­¥éª¤">PHPåˆ›å»ºå›¾åƒæ­¥éª¤</a><ul>
                        
                <li>
                    <a href="#%e5%8f%91%e9%80%81http%e5%a4%b4%e4%bf%a1%e6%81%af%e5%a3%b0%e6%98%8e%e5%86%85%e5%ae%b9%e4%b8%ba%e5%9b%be%e5%83%8f" aria-label="å‘é€HTTPå¤´ä¿¡æ¯ï¼Œå£°æ˜å†…å®¹ä¸ºå›¾åƒ">å‘é€HTTPå¤´ä¿¡æ¯ï¼Œå£°æ˜å†…å®¹ä¸ºå›¾åƒ</a></li>
                <li>
                    <a href="#%e5%88%9b%e5%bb%ba%e7%94%bb%e5%b8%83" aria-label="åˆ›å»ºç”»å¸ƒ">åˆ›å»ºç”»å¸ƒ</a></li>
                <li>
                    <a href="#%e5%88%9b%e5%bb%ba%e7%bb%98%e5%9b%be%e6%89%80%e9%9c%80%e8%a6%81%e7%9a%84%e9%a2%9c%e8%89%b2" aria-label="åˆ›å»ºç»˜å›¾æ‰€éœ€è¦çš„é¢œè‰²">åˆ›å»ºç»˜å›¾æ‰€éœ€è¦çš„é¢œè‰²</a></li>
                <li>
                    <a href="#%e7%bb%98%e5%9b%be%e5%a1%ab%e5%85%85%e7%94%bb%e5%b8%83%e7%94%bb%e5%9c%86%e7%94%bb%e6%96%b9%e5%9d%97%e7%94%bb%e7%ba%bf%e6%9d%a1%e7%94%bb%e5%b8%83%e4%b8%8a%e5%86%99%e5%ad%97" aria-label="ç»˜å›¾ï¼ˆå¡«å……ç”»å¸ƒã€ç”»åœ†ã€ç”»æ–¹å—ã€ç”»çº¿æ¡ã€ç”»å¸ƒä¸Šå†™å­—ï¼‰">ç»˜å›¾ï¼ˆå¡«å……ç”»å¸ƒã€ç”»åœ†ã€ç”»æ–¹å—ã€ç”»çº¿æ¡ã€ç”»å¸ƒä¸Šå†™å­—ï¼‰</a></li>
                <li>
                    <a href="#%e8%be%93%e5%87%ba%e5%9b%be%e5%83%8f" aria-label="è¾“å‡ºå›¾åƒ">è¾“å‡ºå›¾åƒ</a></li>
                <li>
                    <a href="#%e9%87%8a%e6%94%be%e7%94%bb%e5%b8%83%e8%b5%84%e6%ba%90" aria-label="é‡Šæ”¾ç”»å¸ƒèµ„æº">é‡Šæ”¾ç”»å¸ƒèµ„æº</a></li></ul>
                </li>
                <li>
                    <a href="#%e9%aa%8c%e8%af%81%e7%a0%81%e7%b1%bb" aria-label="éªŒè¯ç ç±»">éªŒè¯ç ç±»</a><ul>
                        
                <li>
                    <a href="#verificationcode%e7%b1%bb" aria-label="Verificationcodeç±»">Verificationcodeç±»</a></li>
                <li>
                    <a href="#%e5%90%8e%e7%ab%af%e4%bd%bf%e7%94%a8" aria-label="åç«¯ä½¿ç”¨">åç«¯ä½¿ç”¨</a></li>
                <li>
                    <a href="#%e5%89%8d%e7%ab%af%e4%bd%bf%e7%94%a8" aria-label="å‰ç«¯ä½¿ç”¨">å‰ç«¯ä½¿ç”¨</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><blockquote>
<p>åˆ©ç”¨phpä¸­çš„GDåº“å¯ä»¥å®ŒæˆéªŒè¯ç ç±»çš„å¼€å‘ã€‚<a href="https://houdunren.gitee.io/note/php/9%20%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86.html#%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86">åç›¾äººæ•™ç¨‹</a></p>
</blockquote>
<h2 id="phpåˆ›å»ºå›¾åƒæ­¥éª¤">PHPåˆ›å»ºå›¾åƒæ­¥éª¤<a hidden class="anchor" aria-hidden="true" href="#phpåˆ›å»ºå›¾åƒæ­¥éª¤">#</a></h2>
<h3 id="å‘é€httpå¤´ä¿¡æ¯å£°æ˜å†…å®¹ä¸ºå›¾åƒ">å‘é€HTTPå¤´ä¿¡æ¯ï¼Œå£°æ˜å†…å®¹ä¸ºå›¾åƒ<a hidden class="anchor" aria-hidden="true" href="#å‘é€httpå¤´ä¿¡æ¯å£°æ˜å†…å®¹ä¸ºå›¾åƒ">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#a6e22e">header</span>(<span style="color:#e6db74">&#39;Content-type:image/gif&#39;</span>);
<span style="color:#a6e22e">header</span>(<span style="color:#e6db74">&#39;Content-type:image/jpeg&#39;</span>);
<span style="color:#a6e22e">header</span>(<span style="color:#e6db74">&#39;Content-type:image/png&#39;</span>);
</code></pre></div><p>é€šè¿‡è®¾ç½®å¤´ä¿¡æ¯è®©æµè§ˆå™¨æ¸²æŸ“å‡ºå›¾åƒï¼Œè€Œä¸æ˜¯HTMLç­‰å…¶ä»–ç±»å‹</p>
<h3 id="åˆ›å»ºç”»å¸ƒ">åˆ›å»ºç”»å¸ƒ<a hidden class="anchor" aria-hidden="true" href="#åˆ›å»ºç”»å¸ƒ">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#a6e22e">imageCreateTrueColor</span>(<span style="color:#a6e22e">width</span>,<span style="color:#a6e22e">height</span>);
</code></pre></div><p><code>width &amp; height</code> ç”»å¸ƒå®½é«˜ï¼Œå³ä¸ºè¾“å‡ºå›¾ç‰‡çš„å°ºå¯¸,è¿”å›ä¸º<code>source</code> ç±»å‹ï¼Œåç»­æ“ä½œéƒ½æ˜¯é’ˆå¯¹è¿™ä¸ªèµ„æºå±•å¼€ã€‚</p>
<h3 id="åˆ›å»ºç»˜å›¾æ‰€éœ€è¦çš„é¢œè‰²">åˆ›å»ºç»˜å›¾æ‰€éœ€è¦çš„é¢œè‰²<a hidden class="anchor" aria-hidden="true" href="#åˆ›å»ºç»˜å›¾æ‰€éœ€è¦çš„é¢œè‰²">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#a6e22e">imageColorAllocate</span>(<span style="color:#a6e22e">img_resource</span>,<span style="color:#a6e22e">R</span>,<span style="color:#a6e22e">G</span>,<span style="color:#a6e22e">B</span>);
</code></pre></div><p>é¢œè‰²ä»å±äºåˆ›å»ºç”»å¸ƒäº§ç”Ÿçš„å›¾åƒèµ„æºè€Œå­˜åœ¨ï¼Œåé¢ä¸‰ä¸ªå€¼åˆ†åˆ«ä¸ºçº¢ç»¿è“ä¸‰ä¸ªé€šé“çš„å€¼ï¼Œä¸º<code>int</code>ç±»å‹,åœ¨0â€”255ä¹‹é—´ã€‚</p>
<h3 id="ç»˜å›¾å¡«å……ç”»å¸ƒç”»åœ†ç”»æ–¹å—ç”»çº¿æ¡ç”»å¸ƒä¸Šå†™å­—">ç»˜å›¾ï¼ˆå¡«å……ç”»å¸ƒã€ç”»åœ†ã€ç”»æ–¹å—ã€ç”»çº¿æ¡ã€ç”»å¸ƒä¸Šå†™å­—ï¼‰<a hidden class="anchor" aria-hidden="true" href="#ç»˜å›¾å¡«å……ç”»å¸ƒç”»åœ†ç”»æ–¹å—ç”»çº¿æ¡ç”»å¸ƒä¸Šå†™å­—">#</a></h3>
<p>ğŸ‘‰ <strong>å¡«å……ç”»å¸ƒ(ç”»å¸ƒèƒŒæ™¯)</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#a6e22e">imageFill</span>(<span style="color:#a6e22e">img_resource</span>,<span style="color:#a6e22e">x</span>,<span style="color:#a6e22e">y</span>,<span style="color:#a6e22e">color</span>);
</code></pre></div><p>ğŸ‘‰ <strong>ç”»åœ†</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#75715e">//ç»˜åˆ¶ç©ºå¿ƒåœ†å½¢
</span><span style="color:#75715e"></span><span style="color:#a6e22e">imageEllipse</span>(<span style="color:#a6e22e">img_res</span>,<span style="color:#a6e22e">x</span>,<span style="color:#a6e22e">y</span>,<span style="color:#a6e22e">w</span>,<span style="color:#a6e22e">h</span>,<span style="color:#a6e22e">color</span>);
<span style="color:#75715e">//ç»˜åˆ¶å¡«å……å¥½çš„å®å¿ƒåœ†
</span><span style="color:#75715e"></span><span style="color:#a6e22e">imageFilledEllipse</span>(<span style="color:#a6e22e">img_res</span>,<span style="color:#a6e22e">x</span>,<span style="color:#a6e22e">y</span>,<span style="color:#a6e22e">w</span>,<span style="color:#a6e22e">h</span>,<span style="color:#a6e22e">color</span>);
</code></pre></div><p>ç»˜åˆ¶ åœ†å¿ƒ(x,y) å®½ xï¼Œé«˜ hï¼Œçš„åœ†</p>
<p>ğŸ‘‰ <strong>ç”»æ–¹</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#75715e">//ç©ºå¿ƒçŸ©å½¢
</span><span style="color:#75715e"></span><span style="color:#a6e22e">imageRectangle</span>(<span style="color:#a6e22e">img_res</span>,<span style="color:#a6e22e">x1</span>,<span style="color:#a6e22e">y1</span>,<span style="color:#a6e22e">x2</span>,<span style="color:#a6e22e">y2</span>,<span style="color:#a6e22e">color</span>);
<span style="color:#75715e">//å®å¿ƒçŸ©å½¢
</span><span style="color:#75715e"></span><span style="color:#a6e22e">imageFilledRectangle</span> (<span style="color:#a6e22e">img_res</span>,<span style="color:#a6e22e">x1</span>,<span style="color:#a6e22e">y1</span>,<span style="color:#a6e22e">x2</span>,<span style="color:#a6e22e">y2</span>,<span style="color:#a6e22e">color</span>);
</code></pre></div><p>(x1,y1)ä¸ºå·¦ä¸Šè§’åæ ‡ï¼Œ (x2,y2)ä¸ºå³ä¸‹è§’åæ ‡</p>
<p><img loading="lazy" src="https://gitee.com/fintinger/figure-bed/raw/master//images/20201003214907.gif" alt="ç»˜åˆ¶çŸ©å½¢å›¾ç¤º"  />
</p>
<p>ğŸ‘‰<strong>ç”»çº¿æ¡</strong></p>
<pre tabindex="0"><code>imageLine(img_res,x1,y1,x2,y2,color)
</code></pre><p>(x1,y1)ä¸(x2,y2)ä¸¤ç‚¹ç¡®å®šçš„ç›´çº¿ã€‚</p>
<p>ğŸ‘‰ <strong>ç»˜åˆ¶åƒç´ (ç‚¹)</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#a6e22e">imagesetpixel</span> ( <span style="color:#a6e22e">img_res</span> , <span style="color:#a6e22e">x</span> , <span style="color:#a6e22e">y</span> , <span style="color:#a6e22e">color</span> )
</code></pre></div><p>ğŸ‘‰ <strong>è¾“å…¥æ–‡æœ¬</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#a6e22e">imagettftext</span> (<span style="color:#a6e22e">img_res</span> , <span style="color:#a6e22e">size</span> , <span style="color:#a6e22e">angle</span> , <span style="color:#a6e22e">x</span> , <span style="color:#a6e22e">y</span> , <span style="color:#a6e22e">color</span> , <span style="color:#a6e22e">fontfile</span> ,<span style="color:#a6e22e">text</span> )
</code></pre></div><p>å›¾åƒèµ„æºï¼Œå­—ä½“å°ºå¯¸ï¼Œè§’åº¦ï¼Œç¬¬ä¸€ä¸ªå­—ç¬¦çš„åŸºæœ¬ç‚¹ï¼ˆå¤§æ¦‚æ˜¯å­—ç¬¦çš„å·¦ä¸‹è§’ï¼‰ï¼ŒY åæ ‡ï¼ˆå­—ä½“åŸºçº¿çš„ä½ç½®ï¼‰ï¼Œé¢œè‰² ï¼Œå­—ä½“æ–‡ä»¶ç»å¯¹è·¯å¾„(<code>realpath($path)</code>è·å–)ï¼Œæ–‡æœ¬å­—ç¬¦ä¸²ï¼ˆUTF-8 ç¼–ç ï¼‰</p>
<blockquote>
<p>âœ¨<strong>æ–‡æœ¬ç›’å­ï¼Ÿ</strong></p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#a6e22e">imagettfbbox</span> ( <span style="color:#a6e22e">size</span> , <span style="color:#a6e22e">angle</span> , <span style="color:#a6e22e">fontfile</span> , <span style="color:#a6e22e">text</span> );
</code></pre></div><p>è¿”å›ä¸€ä¸ªå«æœ‰ 8 ä¸ªå•å…ƒçš„æ•°ç»„è¡¨ç¤ºäº†æ–‡æœ¬å¤–æ¡†çš„å››ä¸ªè§’ï¼Œå¾—åˆ°æ–‡æœ¬èŒƒå›´çš„ç›’å­å¤§å°ï¼Œå¯ä»¥æ–¹ä¾¿æ§åˆ¶æ–‡æœ¬è¾“å‡ºä½ç½®ï¼š</p>
<table>
<thead>
<tr>
<th>å˜é‡</th>
<th>ä½ç½®</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>å·¦ä¸‹è§’ X ä½ç½®</td>
</tr>
<tr>
<td>1</td>
<td>å·¦ä¸‹è§’ Y ä½ç½®</td>
</tr>
<tr>
<td>2</td>
<td>å³ä¸‹è§’ X ä½ç½®</td>
</tr>
<tr>
<td>3</td>
<td>å³ä¸‹è§’ Y ä½ç½®</td>
</tr>
<tr>
<td>4</td>
<td>å³ä¸Šè§’ X ä½ç½®</td>
</tr>
<tr>
<td>5</td>
<td>å³ä¸Šè§’ Y ä½ç½®</td>
</tr>
<tr>
<td>6</td>
<td>å·¦ä¸Šè§’ X ä½ç½®</td>
</tr>
<tr>
<td>7</td>
<td>å·¦ä¸Šè§’ Y ä½ç½®</td>
</tr>
</tbody>
</table>
<h3 id="è¾“å‡ºå›¾åƒ">è¾“å‡ºå›¾åƒ<a hidden class="anchor" aria-hidden="true" href="#è¾“å‡ºå›¾åƒ">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#a6e22e">imagegif</span>(<span style="color:#a6e22e">img_resource</span>[,<span style="color:#a6e22e">filename</span>]);
<span style="color:#a6e22e">imagejpeg</span>(<span style="color:#a6e22e">img_resource</span>[,<span style="color:#a6e22e">filename</span>]);
<span style="color:#a6e22e">imagepng</span>(<span style="color:#a6e22e">img_resource</span>[,<span style="color:#a6e22e">filename</span>]);
<span style="color:#a6e22e">imagebmp</span>(<span style="color:#a6e22e">img_resource</span>[,<span style="color:#a6e22e">filename</span>]);
</code></pre></div><p>å½“è®¾ç½®ç¬¬äºŒä¸ªå‚æ•°æ—¶è¡¨ç¤ºå‚¨å­˜æ–‡ä»¶ï¼Œå¦‚æœå­˜åœ¨åŒåæ–‡ä»¶ä¼šè¦†ç›–</p>
<h3 id="é‡Šæ”¾ç”»å¸ƒèµ„æº">é‡Šæ”¾ç”»å¸ƒèµ„æº<a hidden class="anchor" aria-hidden="true" href="#é‡Šæ”¾ç”»å¸ƒèµ„æº">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#a6e22e">imageDestroy</span>(<span style="color:#a6e22e">img_resource</span>);
</code></pre></div><p>å›¾åƒè¾“å‡ºå®Œæ¯•åŠæ—¶é‡Šæ”¾èµ„æºï¼ŒæŠŠå†…å­˜ç©ºé—´ç•™ç»™æ›´éœ€è¦çš„ç¨‹åºã€‚</p>
<h2 id="éªŒè¯ç ç±»">éªŒè¯ç ç±»<a hidden class="anchor" aria-hidden="true" href="#éªŒè¯ç ç±»">#</a></h2>
<h3 id="verificationcodeç±»">Verificationcodeç±»<a hidden class="anchor" aria-hidden="true" href="#verificationcodeç±»">#</a></h3>
<blockquote>
<p>ç»˜åˆ¶ç”»å¸ƒï¼Œè®¾ç½®èƒŒæ™¯è‰²ï¼Œå…ˆå†™å…¥éšæœºæ–‡æœ¬ï¼Œç„¶åç»˜åˆ¶éšæœºå¹²æ‰°çº¿ï¼Œå¹²æ‰°ç‚¹å°±å¯</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#f92672">&lt;?</span><span style="color:#a6e22e">php</span>

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Verificationcode</span>
{

    <span style="color:#66d9ef">protected</span> $width;

    <span style="color:#66d9ef">protected</span> $height;

    <span style="color:#66d9ef">protected</span> $len;

    <span style="color:#66d9ef">public</span> $imgsource;

    <span style="color:#66d9ef">protected</span> $size;

    <span style="color:#66d9ef">protected</span> $fontfile;

    <span style="color:#66d9ef">protected</span> $rescode;

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> __construct($w <span style="color:#f92672">=</span> <span style="color:#ae81ff">200</span>, $h <span style="color:#f92672">=</span> <span style="color:#ae81ff">50</span>, $len <span style="color:#f92672">=</span> <span style="color:#ae81ff">4</span>, $size <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span>)
    {
        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">width</span> <span style="color:#f92672">=</span> $w;
        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">height</span> <span style="color:#f92672">=</span> $h;
        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">len</span> <span style="color:#f92672">=</span> $len;
        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">size</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">is_null</span>($size) <span style="color:#f92672">?</span> $h <span style="color:#f92672">*</span> <span style="color:#ae81ff">0.4</span> <span style="color:#f92672">:</span> $size;
        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">fontfile</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">realpath</span>(<span style="color:#e6db74">&#34;source.ttf&#34;</span>);
    }

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">render</span>()
    {
        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">bg</span>();
        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">line</span>();<span style="color:#75715e">//æ–‡å­—ä¸‹
</span><span style="color:#75715e"></span>        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">text</span>();
        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">line</span>();<span style="color:#75715e">//æ–‡å­—ä¸Š
</span><span style="color:#75715e"></span>        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">pix</span>();
        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">show</span>();

        <span style="color:#66d9ef">return</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">rescode</span>;
    }

    <span style="color:#75715e">//ç»˜åˆ¶ç”»å¸ƒ
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">bg</span>()
    {
        $img <span style="color:#f92672">=</span> <span style="color:#a6e22e">imageCreateTrueColor</span>($this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">width</span>, $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">height</span>);
        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">imgsource</span> <span style="color:#f92672">=</span> $img;
        <span style="color:#a6e22e">imagefill</span>(
            $img,
            <span style="color:#ae81ff">0</span>,
            <span style="color:#ae81ff">0</span>,
            <span style="color:#a6e22e">imageColorAllocate</span>($img, <span style="color:#ae81ff">120</span>, <span style="color:#ae81ff">120</span>, <span style="color:#ae81ff">120</span>)
        );
    }

    <span style="color:#75715e">//ç»˜åˆ¶éšæœºçº¿æ¡
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">line</span>()
    {
        <span style="color:#66d9ef">for</span> ($i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $i <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">3</span>; $i<span style="color:#f92672">++</span>) {
            <span style="color:#a6e22e">imagesetthickness</span>($this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">imgsource</span>, <span style="color:#a6e22e">mt_rand</span>(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">3</span>));
            <span style="color:#a6e22e">imageLine</span>(
                $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">imgsource</span>,
                <span style="color:#a6e22e">mt_rand</span>(<span style="color:#ae81ff">0</span>, $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">width</span>),
                <span style="color:#a6e22e">mt_rand</span>(<span style="color:#ae81ff">0</span>, $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">height</span>),
                <span style="color:#a6e22e">mt_rand</span>(<span style="color:#ae81ff">0</span>, $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">width</span>),
                <span style="color:#a6e22e">mt_rand</span>(<span style="color:#ae81ff">0</span>, $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">height</span>),
                $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">ran_color</span>()
            );
        }
    }

    <span style="color:#75715e">//ç»˜åˆ¶å¹²æ‰°ç‚¹
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">pix</span>()
    {
        <span style="color:#66d9ef">for</span> ($i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $i <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">800</span>; $i<span style="color:#f92672">++</span>) {
            <span style="color:#a6e22e">imagesetpixel</span>(
                $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">imgsource</span>,
                <span style="color:#a6e22e">mt_rand</span>(<span style="color:#ae81ff">0</span>, $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">width</span>),
                <span style="color:#a6e22e">mt_rand</span>(<span style="color:#ae81ff">0</span>, $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">height</span>),
                $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">ran_color</span>()
            );
        }
    }

    <span style="color:#75715e">//éšæœºæ–‡æœ¬
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">text</span>()
    {
        $range <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;abcdefghijklmnopqrstuvwxyz0123456789&#34;</span>;
        $code <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>;
        <span style="color:#66d9ef">for</span> ($i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $i <span style="color:#f92672">&lt;</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">len</span>; $i<span style="color:#f92672">++</span>) {
            $text <span style="color:#f92672">=</span> $range[<span style="color:#a6e22e">mt_rand</span>(<span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">strlen</span>($range) <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>)];
            $box <span style="color:#f92672">=</span> <span style="color:#a6e22e">imagettfbbox</span>($this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">size</span>, <span style="color:#ae81ff">0</span>, $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">fontfile</span>, $range[$i]);
            <span style="color:#a6e22e">imagettftext</span>(
                $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">imgsource</span>,
                $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">size</span>,
                <span style="color:#a6e22e">mt_rand</span>(<span style="color:#f92672">-</span><span style="color:#ae81ff">30</span>, <span style="color:#ae81ff">30</span>),
                ($this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">width</span> <span style="color:#f92672">/</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">len</span>) <span style="color:#f92672">*</span> $i <span style="color:#f92672">+</span> <span style="color:#ae81ff">10</span>,
                $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">height</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">+</span> ($box[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">-</span> $box[<span style="color:#ae81ff">7</span>]) <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>,
                $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">ran_text_color</span>(),
                $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">fontfile</span>,
                <span style="color:#a6e22e">strtoupper</span>($text)
            );
            $code <span style="color:#f92672">.=</span> <span style="color:#a6e22e">strtoupper</span>($text);
        }
        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">rescode</span> <span style="color:#f92672">=</span> $code;
    }

    <span style="color:#75715e">//è®¾ç½®å¤´ä¿¡æ¯å¹¶ä¸”è¾“å‡ºpng
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">show</span>()
    {
        <span style="color:#a6e22e">header</span>(<span style="color:#e6db74">&#39;Content-type:image/png&#39;</span>);
        <span style="color:#a6e22e">imagepng</span>($this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">imgsource</span>);
    }

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">ran_color</span>()
    {
        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">imageColorAllocate</span>(
            $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">imgsource</span>,
            <span style="color:#a6e22e">mt_rand</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">255</span>),
            <span style="color:#a6e22e">mt_rand</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">255</span>),
            <span style="color:#a6e22e">mt_rand</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">255</span>),
        );
    }

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">ran_text_color</span>()
    {
        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">imageColorAllocate</span>(
            $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">imgsource</span>,
            <span style="color:#a6e22e">mt_rand</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">80</span>),
            <span style="color:#a6e22e">mt_rand</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">80</span>),
            <span style="color:#a6e22e">mt_rand</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">80</span>),
        );
    }

}
</code></pre></div><p><strong>è¯´æ˜ï¼š</strong></p>
<ul>
<li>å¦‚æœä¸è®¾ç½®å‚æ•°ï¼Œé»˜è®¤å›¾ç‰‡å°ºå¯¸ä¸º200Ã—50ï¼ŒéªŒè¯ç é•¿åº¦ä¸º4ï¼Œå­—ä½“ä¸º (0.4*å›¾ç‰‡é«˜åº¦)</li>
<li>é€šè¿‡è®¡ç®—ä½¿å¾—æ–‡æœ¬å§‹ç»ˆå¤„åœ¨å‚ç›´å±…ä¸­ï¼Œæ°´å¹³åˆ†æ•£å¯¹é½çš„çŠ¶æ€</li>
</ul>
<h3 id="åç«¯ä½¿ç”¨">åç«¯ä½¿ç”¨<a hidden class="anchor" aria-hidden="true" href="#åç«¯ä½¿ç”¨">#</a></h3>
<p>âš¡<code>server.php</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#f92672">&lt;?</span><span style="color:#a6e22e">php</span>
<span style="color:#75715e">//å¼•å…¥æ¸²æŸ“éªŒè¯ç å›¾ç‰‡ï¼Œå¹¶å°†è¿™æ¬¡è¿”å›çš„éªŒè¯ç å­˜åˆ°sessionä¸­
</span><span style="color:#75715e"></span><span style="color:#66d9ef">include</span> <span style="color:#e6db74">&#34;Verificationcode.php&#34;</span>;
<span style="color:#a6e22e">session_start</span>();<span style="color:#75715e">//sessionå¼€å§‹ä¹‹å‰ä¸èƒ½æœ‰è¾“å‡º
</span><span style="color:#75715e"></span>$code <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Verificationcode</span>();
$res <span style="color:#f92672">=</span> $code<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">render</span>();
$_SESSION[<span style="color:#e6db74">&#34;captcha&#34;</span>]<span style="color:#f92672">=</span>$res;
<span style="color:#a6e22e">imageDestroy</span>($code<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">imgsource</span>);
</code></pre></div><p><strong>è¯´æ˜ï¼š</strong></p>
<ul>
<li>è°ƒç”¨<code>render()</code>å‡½æ•°ï¼Œå³å¯ç»˜åˆ¶å‡ºéªŒè¯ç å›¾ç‰‡ï¼Œå¹¶è¿”å›è¿™æ¬¡çš„éªŒè¯ç å­—ç¬¦ä¸²ã€‚</li>
<li>é€šè¿‡å°†è¿”å›çš„éªŒè¯ç å­—ç¬¦ä¸²å­˜å…¥sessionä¸­ï¼Œå¯ä»¥è¿›è¡Œåç»­éªŒè¯æ“ä½œ</li>
</ul>
<h3 id="å‰ç«¯ä½¿ç”¨">å‰ç«¯ä½¿ç”¨<a hidden class="anchor" aria-hidden="true" href="#å‰ç«¯ä½¿ç”¨">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#f92672">img</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;server.php&#34;</span> <span style="color:#a6e22e">alt</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span> <span style="color:#a6e22e">onclick</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;this.src=&#39;server.php?&#39;+Math.random()&#34;</span>&gt;
</code></pre></div><p>âœ¨ å¯ä»¥å°†æ•´ä¸ªformè¡¨å•æäº¤è‡³phpåç«¯ï¼Œç„¶åé€šè¿‡sessionä¸­å­˜å‚¨çš„éªŒè¯ç å­—ç¬¦ä¸²è¿›è¡ŒéªŒè¯ï¼Œä¾‹å¦‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#f92672">form</span> <span style="color:#a6e22e">action</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;check.php&#34;</span> <span style="color:#a6e22e">method</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;post&#34;</span> <span style="color:#a6e22e">enctype</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;multipart/form-data&#34;</span>&gt;
    &lt;<span style="color:#f92672">table</span>&gt;
        &lt;<span style="color:#f92672">tr</span>&gt;
            &lt;<span style="color:#f92672">td</span>&gt;&lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text&#34;</span> <span style="color:#a6e22e">placeholder</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;è¯·è¾“å…¥éªŒè¯ç &#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;captcha&#34;</span>&gt;
            &lt;<span style="color:#f92672">td</span>&gt;&lt;<span style="color:#f92672">img</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;server.php&#34;</span> <span style="color:#a6e22e">alt</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span> <span style="color:#a6e22e">onclick</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;this.src=&#39;server.php?&#39;+Math.random()&#34;</span>&gt;
            &lt;/<span style="color:#f92672">td</span>&gt;
        &lt;/<span style="color:#f92672">tr</span>&gt;
    &lt;/<span style="color:#f92672">table</span>&gt;
    &lt;<span style="color:#f92672">button</span>&gt;ç¡®å®š&lt;/<span style="color:#f92672">button</span>&gt;
&lt;/<span style="color:#f92672">form</span>&gt;
</code></pre></div><p>âš¡<code>check.php</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#f92672">&lt;?</span><span style="color:#a6e22e">php</span>
<span style="color:#a6e22e">session_start</span>();
<span style="color:#66d9ef">include</span> <span style="color:#e6db74">&#34;main.html&#34;</span>;
<span style="color:#66d9ef">if</span> (<span style="color:#f92672">@</span><span style="color:#a6e22e">strtoupper</span>($_POST[<span style="color:#e6db74">&#34;captcha&#34;</span>])<span style="color:#f92672">==@</span>$_SESSION[<span style="color:#e6db74">&#34;captcha&#34;</span>]){
    <span style="color:#66d9ef">echo</span> <span style="color:#e6db74">&#34;&lt;p style=&#39;color: #4FEF10&#39;&gt;éªŒè¯é€šè¿‡&lt;/p&gt;&#34;</span>;
}<span style="color:#66d9ef">else</span>{
    <span style="color:#66d9ef">echo</span> <span style="color:#e6db74">&#34;&lt;p style=&#39;color: #e01&#39;&gt;éªŒè¯å¤±è´¥ï¼&lt;/p&gt;&#34;</span>;
}
</code></pre></div><p>ğŸ‰ğŸ‰ğŸ‰</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://www.fintinger.site/tags/php/">PHP</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://www.fintinger.site/posts/2020/10/14/">
    <span class="title">Â« Prev Page</span>
    <br>
    <span>PHPè¯­æ³•å°ç»“</span>
  </a>
  <a class="next" href="https://www.fintinger.site/posts/2020/09/29/">
    <span class="title">Next Page Â»</span>
    <br>
    <span>Gitç›¸å…³</span>
  </a>
</nav>

  </footer><script src='//cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js'></script>
<div id="waline" class="waline-container"></div>
<style>
    .waline-container {
        background-color: var(--card-background);
        border-radius: var(--card-border-radius);
        box-shadow: var(--shadow-l1);
        padding: var(--card-padding);
    }
    .waline-container .vcount {
        color: var(--card-text-color-main);
    }
</style><script>
    
    new Waline({"avatar":"robohash","dark":"html[data-scheme=\"dark\"]","el":"#waline","emoji":["https://cdn.jsdelivr.net/gh/walinejs/emojis/weibo","https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/bilibili","https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/qq","https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/tieba","https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/tw-emoji"],"highlight":true,"locale":{"admin":"Admin"},"placeholder":"è¯´ç‚¹ä»€ä¹ˆà¼¼ ã¤ â—•_â—• à¼½ã¤","requiredMeta":["name","email","url"],"serverURL":"https://waline-q3l7of5hj-fintinger.vercel.app/","visitor":true});
</script>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2022 <a href="https://www.fintinger.site">Archai&#39;s home</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = 'copy';

        function copyingDone() {
            copybutton.innerText = 'copied!';
            setTimeout(() => {
                copybutton.innerText = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
