<!DOCTYPE html>
<html lang="en">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='基本语法 输出语句    语句 功能     echo 输出字符串类型   print_r 输出引用类型(对象,数组等)   var_dunp 检测变量类型    ::: tip echo语句可用于给前端返回响应体。比如前端通过ajax请求，可以在xhr.response中直接得到echo的内容 :::
变量&amp;amp;常量 👉🏼 变量
   语句 功能 返回值     isset() 检测变量是否存在 boolean   unset() 删除某个变量 none    👉🏼 常量
常量用const 或 define 定义，常量名一般全部大写，不受作用域的限制
::: tip
一般是define在类外定义常量，const在类内定义常量，并且const必须通过类名::变量名来进行访问。但是php5.3以上支持类外通过const定义常量。
:::
:::danger
const不能在条件语句中使用，必出错
:::
 参考文章 《PHP中define() 与 const定义常量的区别详解》'><title>PHP语法小结</title>

<link rel='canonical' href='https://www.fintinger.site/p/php%E8%AF%AD%E6%B3%95%E5%B0%8F%E7%BB%93/'>

<link rel="stylesheet" href="/scss/style.min.css">

<meta property='og:title' content='PHP语法小结'>
<meta property='og:description' content='基本语法 输出语句    语句 功能     echo 输出字符串类型   print_r 输出引用类型(对象,数组等)   var_dunp 检测变量类型    ::: tip echo语句可用于给前端返回响应体。比如前端通过ajax请求，可以在xhr.response中直接得到echo的内容 :::
变量&amp;amp;常量 👉🏼 变量
   语句 功能 返回值     isset() 检测变量是否存在 boolean   unset() 删除某个变量 none    👉🏼 常量
常量用const 或 define 定义，常量名一般全部大写，不受作用域的限制
::: tip
一般是define在类外定义常量，const在类内定义常量，并且const必须通过类名::变量名来进行访问。但是php5.3以上支持类外通过const定义常量。
:::
:::danger
const不能在条件语句中使用，必出错
:::
 参考文章 《PHP中define() 与 const定义常量的区别详解》'>
<meta property='og:url' content='https://www.fintinger.site/p/php%E8%AF%AD%E6%B3%95%E5%B0%8F%E7%BB%93/'>
<meta property='og:site_name' content='Archai &#39;s blog'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='PHP' /><meta property='article:published_time' content='2020-10-13T00:00:00&#43;00:00'/><meta property='article:modified_time' content='2020-10-13T00:00:00&#43;00:00'/><meta property='og:image' content='https://www.fintinger.site/img/defaultImg.jpg' />
<meta name="twitter:title" content="PHP语法小结">
<meta name="twitter:description" content="基本语法 输出语句    语句 功能     echo 输出字符串类型   print_r 输出引用类型(对象,数组等)   var_dunp 检测变量类型    ::: tip echo语句可用于给前端返回响应体。比如前端通过ajax请求，可以在xhr.response中直接得到echo的内容 :::
变量&amp;amp;常量 👉🏼 变量
   语句 功能 返回值     isset() 检测变量是否存在 boolean   unset() 删除某个变量 none    👉🏼 常量
常量用const 或 define 定义，常量名一般全部大写，不受作用域的限制
::: tip
一般是define在类外定义常量，const在类内定义常量，并且const必须通过类名::变量名来进行访问。但是php5.3以上支持类外通过const定义常量。
:::
:::danger
const不能在条件语句中使用，必出错
:::
 参考文章 《PHP中define() 与 const定义常量的区别详解》"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://www.fintinger.site/img/defaultImg.jpg' />
    <link rel="shortcut icon" href="https://gitee.com/fintinger/figure-bed/raw/master//images/20210530080206.ico" />


    </head>
    <body class="
    article-page has-toc
">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex 
    
        extended
    
">
    
        <div id="article-toolbar">
            <a href="https://www.fintinger.site" class="back-home">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="15 6 9 12 15 18" />
</svg>



                <span>Back</span>
            </a>
        </div>
    
<main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/%E5%90%8E%E7%AB%AF/" >
                后端
            </a>
        
            <a href="/categories/%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/" >
                学习总结
            </a>
        
    </header>
    

    <h2 class="article-title">
        <a href="/p/php%E8%AF%AD%E6%B3%95%E5%B0%8F%E7%BB%93/">PHP语法小结</a>
    </h2>

    

    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Oct 13, 2020</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    10 min read
                </time>
            </div>
        
    </footer>
    
</div>
</header>

    <section class="article-content">
    <h2 id="基本语法">基本语法</h2>
<h3 id="输出语句">输出语句</h3>
<table>
<thead>
<tr>
<th>语句</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>echo</code></td>
<td>输出字符串类型</td>
</tr>
<tr>
<td><code>print_r</code></td>
<td>输出引用类型(对象,数组等)</td>
</tr>
<tr>
<td><code>var_dunp</code></td>
<td>检测变量类型</td>
</tr>
</tbody>
</table>
<p>::: tip
<code>echo</code>语句可用于给前端返回响应体。比如前端通过<code>ajax</code>请求，可以在<code>xhr.response</code>中直接得到<code>echo</code>的内容
:::</p>
<h3 id="变量常量">变量&amp;常量</h3>
<p>👉🏼 <strong>变量</strong></p>
<table>
<thead>
<tr>
<th>语句</th>
<th>功能</th>
<th>返回值</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>isset()</code></td>
<td>检测变量是否存在</td>
<td>boolean</td>
</tr>
<tr>
<td><code>unset()</code></td>
<td>删除某个变量</td>
<td>none</td>
</tr>
</tbody>
</table>
<p>👉🏼 <strong>常量</strong></p>
<p>常量用<code>const</code> 或 <code>define</code> 定义，常量名一般全部大写，不受作用域的限制</p>
<p>::: tip</p>
<p>一般是define在类外定义常量，const在类内定义常量，并且const必须通过<code>类名::变量名</code>来进行访问。但是php5.3以上支持类外通过const定义常量。</p>
<p>:::</p>
<p>:::danger</p>
<p><code>const</code>不能在条件语句中使用，必出错</p>
<p>:::</p>
<blockquote>
<p>参考文章 <a class="link" href="https://www.jb51.net/article/163855.htm"  target="_blank" rel="noopener"
    >《PHP中define() 与 const定义常量的区别详解》</a></p>
</blockquote>
<h3 id="三元表达式及使用">三元表达式及@使用</h3>
<p><strong>省略写法</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="k">echo</span> <span class="nv">$name</span><span class="o">?:</span><span class="s1">&#39;NO&#39;</span><span class="p">;</span><span class="c1">//输出本身的话，可以省略！
</span></code></pre></div><p><strong><code>??</code>的作用</strong></p>
<p>①检测变量是否定义(<code>isset</code>) ②检测变量是否为空(<code>is_null</code>)</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="k">echo</span> <span class="nv">$name</span><span class="o">??</span><span class="s1">&#39;NO&#39;</span><span class="p">;</span><span class="c1">//NO
</span></code></pre></div><p><strong>@用来屏蔽错误</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="o">@</span><span class="p">(</span><span class="mi">9</span><span class="o">/</span><span class="mi">0</span><span class="p">)</span><span class="c1">//不会报错
</span></code></pre></div><h3 id="字符串相关函数">字符串相关函数</h3>
<h4 id="定界符">定界符</h4>
<p>以<code>&lt;&lt;&lt;</code>开头，用相同字符串定义开头&amp;结尾。</p>
<p>::: details</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="nv">$temp</span><span class="o">=&lt;&lt;&lt;</span><span class="nx">tem</span>
<span class="o">&lt;</span><span class="nx">h1</span> <span class="nx">style</span><span class="o">=</span><span class="s2">&#34;color: #e01&#34;</span><span class="o">&gt;</span><span class="nx">这是一段临时HTML模板</span><span class="o">&lt;/</span><span class="nx">h1</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">h5</span> <span class="nx">style</span><span class="o">=</span><span class="s2">&#34;color: #00b3ff&#34;</span><span class="o">&gt;</span><span class="nx">hhc</span><span class="o">&lt;/</span><span class="nx">h5</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
<span class="nx">document</span><span class="o">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">&#34;h5&#34;</span><span class="p">)</span><span class="o">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&#34;mouseenter&#34;</span><span class="p">,</span><span class="k">function</span> <span class="p">(){</span>
    <span class="k">this</span><span class="o">.</span><span class="nx">style</span><span class="o">.</span><span class="nx">color</span><span class="o">=</span><span class="s2">&#34;#000&#34;</span><span class="p">;</span>
<span class="p">})</span>
<span class="o">&lt;/</span><span class="nx">script</span><span class="o">&gt;</span>
<span class="nx">tem</span><span class="p">;</span>
</code></pre></div><p>:::</p>
<h4 id="字符串连接">字符串连接</h4>
<p><code>.</code>符号用来连接字符串</p>
<p>::: details</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="nv">$str</span><span class="o">=</span><span class="s2">&#34;fer.com&#34;</span><span class="p">;</span>
<span class="k">echo</span> <span class="nv">$str</span><span class="o">.</span><span class="s2">&#34;=&gt;&#34;</span><span class="o">.</span><span class="s2">&#34;hhhhc&#34;</span><span class="p">;</span>
</code></pre></div><p>:::</p>
<h4 id="字符串长度">字符串长度</h4>
<table>
<thead>
<tr>
<th>方法</th>
<th>参数</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>strlen() </code></td>
<td><code>[$str]</code></td>
<td>获得字符串长度，中文一个字两个字符！</td>
</tr>
<tr>
<td><code>mb_strlen()</code></td>
<td><code>[$str,encoding]</code></td>
<td>指定编码格式获取长度，指定为<code>utf8</code>，中文一个字一个字符</td>
</tr>
</tbody>
</table>
<h4 id="字符串格式">字符串格式</h4>
<table>
<thead>
<tr>
<th>方法</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>trim()</code></td>
<td>去空格</td>
</tr>
<tr>
<td><code>strtoupper()</code>&amp;<code>strtolower</code></td>
<td>大小写转换</td>
</tr>
<tr>
<td><code>ucfirst()</code></td>
<td>指定一段字符串首字母大写</td>
</tr>
<tr>
<td><code>ucwords($sentence,delimiters)</code></td>
<td>以delimiters为分割，首字母大写</td>
</tr>
</tbody>
</table>
<p>::: details</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="nv">$sentence</span><span class="o">=</span><span class="s2">&#34;my name is jqf.let&#39;s go shopping!&#34;</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">&#34;&lt;hr&gt;&#34;</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">ucwords</span><span class="p">(</span><span class="nv">$sentence</span><span class="p">,</span><span class="s1">&#39;.&#39;</span><span class="p">);</span><span class="c1">//My name is jqf.Let&#39;s go shopping!
</span></code></pre></div><p>:::</p>
<h4 id="与数组相互转化">与数组相互转化</h4>
<p><code>explode(delimiter,$str)</code> &amp; <code>implode(glue,$arr)</code></p>
<h4 id="截取字符串">截取字符串</h4>
<p><code>substr($str,start,len)</code> &amp; <code>mb_substr($str,start,len,encoding)</code>，返回截取的字符串，原字符串不会发生改变</p>
<h4 id="md5加密">md5加密</h4>
<p>::: theorem MD5
<strong>MD5信息摘要算法</strong>（英语：MD5 Message-Digest Algorithm），一种被广泛使用的<a class="link" href="https://baike.baidu.com/item/%e5%af%86%e7%a0%81%e6%95%a3%e5%88%97%e5%87%bd%e6%95%b0/14937715"  target="_blank" rel="noopener"
    >密码散列函数</a>，可以产生出一个128位（16<a class="link" href="https://baike.baidu.com/item/%e5%ad%97%e8%8a%82/1096318"  target="_blank" rel="noopener"
    >字节</a>）的散列值（hash value），用于确保信息传输完整一致。</p>
<p>::: right
来自<a class="link" href="https://baike.baidu.com/item/MD5/212708"  target="_blank" rel="noopener"
    >百度百科</a>
:::</p>
<h3 id="引入模块">引入模块</h3>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>include</code> &amp; <code>include_once</code></td>
<td>弱引用，如果引入的文件不存在则会<code>warning</code>(可以用<code>@</code>屏蔽掉)，但后续代码仍然执行</td>
</tr>
<tr>
<td><code>require</code> &amp; <code>require_once</code></td>
<td>强引用，所引文件不存在则会报<code>fatal mistake</code>,后续不再执行</td>
</tr>
</tbody>
</table>
<p>::: tip</p>
<p><code>include_once</code> &amp; <code>require_once</code>用来避免<strong>引入多次某个模块而造成的错误</strong>，具体如下</p>
<p>:::</p>
<p>::: details</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="c1">//tools.php
</span><span class="c1"></span><span class="o">&lt;?</span><span class="nx">php</span>
<span class="k">function</span> <span class="nf">show</span><span class="p">(){</span>
    <span class="k">return</span> <span class="s1">&#39;https://www.fintinger.xyz&#39;</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="c1">//1.php
</span><span class="c1"></span><span class="o">&lt;?</span><span class="nx">php</span>
<span class="k">include</span> <span class="s1">&#39;tools.php&#39;</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">show</span><span class="p">();</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="c1">//2.php
</span><span class="c1"></span><span class="k">include_once</span> <span class="s2">&#34;1.php&#34;</span><span class="p">;</span>
<span class="k">include_once</span> <span class="s2">&#34;tools.php&#34;</span><span class="p">;</span>
</code></pre></div><p><code>2.php</code>中引入了两次<code>tools.php</code>，通过<code>include_once</code>可以避免产生错误</p>
<p>:::</p>
<h3 id="函数相关">函数相关</h3>
<h4 id="点语法">点语法</h4>
<p>类似于javascript，可以在函数传参数的时候实现&quot;聚合&quot;的效果</p>
<p>::: details</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span>
<span class="k">function</span> <span class="nf">sum</span><span class="p">(</span><span class="o">...</span><span class="nv">$nums</span><span class="p">){</span>
    <span class="nx">print_r</span><span class="p">(</span><span class="nv">$nums</span><span class="p">);</span>
    <span class="k">echo</span> <span class="s2">&#34;&lt;hr&gt;&#34;</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nx">array_sum</span><span class="p">(</span><span class="nv">$nums</span><span class="p">);</span>
<span class="p">}</span>
<span class="nx">sum</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">7</span><span class="p">);</span>
</code></pre></div><p>:::</p>
<h4 id="传址传值">传址&amp;传值</h4>
<p><code>&amp;</code> 用来传址</p>
<h4 id="严格模式">严格模式</h4>
<p><code>declare(strict_types=1);</code>声明严格模式，严格模式下，如果约束了函数参数的类型，传入不是约束的值，会报错。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="k">declare</span><span class="p">(</span><span class="nx">strict_types</span><span class="o">=</span><span class="mi">1</span><span class="p">);</span>
<span class="k">function</span> <span class="nf">sum</span><span class="p">(</span><span class="nx">int</span> <span class="o">...</span><span class="nv">$nums</span><span class="p">){</span>
    <span class="k">return</span> <span class="nx">array_sum</span><span class="p">(</span><span class="nv">$nums</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">echo</span> <span class="nx">sum</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="s1">&#39;5&#39;</span><span class="p">);</span><span class="c1">//Fatal error
</span></code></pre></div><h4 id="php标准的函数">php标准的函数</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="k">function</span> <span class="nf">show</span><span class="p">(</span><span class="nx">int</span> <span class="nv">$var</span><span class="p">)</span><span class="o">:</span> <span class="nx">string</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="s1">&#39;hhc&#39;</span><span class="p">;</span>
<span class="p">}</span><span class="c1">//参数(php&gt;5)和返回值(php&gt;7)都有明确的类型约束
</span></code></pre></div><h4 id="好用的变量函数">好用的变量函数！</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="nv">$action</span><span class="o">=</span><span class="s2">&#34;fn&#34;</span><span class="p">;</span>
<span class="k">function</span> <span class="nf">fn</span><span class="p">(){</span>
	<span class="c1">//do something
</span><span class="c1"></span><span class="p">}</span>
<span class="nv">$action</span><span class="p">()</span><span class="c1">//即可调用fn函数
</span></code></pre></div><p><strong>具体应用</strong> ：根据图片后缀设定对应处理函数</p>
<p>::: details</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="k">function</span> <span class="nf">png</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="s1">&#39;png fn running...&#39;</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">function</span> <span class="nf">jpg</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="s1">&#39;ipg fn running...&#39;</span><span class="p">;</span>
<span class="p">}</span>

<span class="nv">$file</span> <span class="o">=</span> <span class="s1">&#39;logo.png&#39;</span><span class="p">;</span>

<span class="nv">$action</span> <span class="o">=</span> <span class="nx">explode</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="nv">$file</span><span class="p">)[</span><span class="mi">1</span><span class="p">];</span>

<span class="k">echo</span> <span class="nx">function_exists</span><span class="p">(</span><span class="nv">$action</span><span class="p">)</span>
    <span class="o">?</span> <span class="nv">$action</span><span class="p">()</span>
    <span class="o">:</span> <span class="s1">&#39;无法处理这种格式的图片！&#39;</span><span class="p">;</span>
</code></pre></div><p>:::</p>
<h3 id="数组相关">数组相关</h3>
<h4 id="指针读取数组">指针读取数组</h4>
<p><code>current($arr)</code>&amp;<code>next($arr)</code> 操作数组指针，如果读取不到，current则为0</p>
<h4 id="list">list()</h4>
<p>list — 把数组中的值赋给一组变量。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="nv">$info</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;coffee&#39;</span><span class="p">,</span> <span class="s1">&#39;brown&#39;</span><span class="p">,</span> <span class="s1">&#39;caffeine&#39;</span><span class="p">);</span>

<span class="c1">// 列出所有变量
</span><span class="c1"></span><span class="k">list</span><span class="p">(</span><span class="nv">$drink</span><span class="p">,</span> <span class="nv">$color</span><span class="p">,</span> <span class="nv">$power</span><span class="p">)</span> <span class="o">=</span> <span class="nv">$info</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">&#34;</span><span class="si">$drink</span><span class="s2"> is </span><span class="si">$color</span><span class="s2"> and </span><span class="si">$power</span><span class="s2"> makes it special.</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">;</span>
</code></pre></div><p>::: tip</p>
<p>在 PHP 7.1.0 之前的版本，<strong>list()</strong> 仅能用于数字索引的数组，并假定数字索引从 0 开始。</p>
<p>:::</p>
<p>也就是说 PHP&gt;7.1.0，list可以用来解构<code>key=&gt;value</code>型数组了</p>
<p>::: details</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="nv">$arr</span><span class="o">=</span><span class="p">[</span>
    <span class="s2">&#34;age&#34;</span><span class="o">=&gt;</span><span class="s2">&#34;18&#34;</span><span class="p">,</span>
    <span class="s2">&#34;name&#34;</span><span class="o">=&gt;</span><span class="s2">&#34;fin&#34;</span><span class="p">,</span>
<span class="p">];</span>
<span class="k">list</span><span class="p">(</span><span class="s2">&#34;name&#34;</span><span class="o">=&gt;</span><span class="nv">$name</span><span class="p">,</span><span class="s2">&#34;age&#34;</span><span class="o">=&gt;</span><span class="nv">$age</span><span class="p">)</span><span class="o">=</span><span class="nv">$arr</span><span class="p">;</span>
<span class="k">echo</span> <span class="nv">$name</span><span class="p">;</span><span class="c1">//fin
</span></code></pre></div><p>关于PHP中类似于ES6的对象解构赋值操作，有种更加稳妥方便的方式，那就是<a class="link" href="https://www.php.net/manual/zh/function.extract.php"  target="_blank" rel="noopener"
    >extract()</a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="nv">$arr</span><span class="o">=</span><span class="p">[</span>
    <span class="s2">&#34;age&#34;</span><span class="o">=&gt;</span><span class="s2">&#34;18&#34;</span><span class="p">,</span>
    <span class="s2">&#34;name&#34;</span><span class="o">=&gt;</span><span class="s2">&#34;fin&#34;</span><span class="p">,</span>
<span class="p">];</span>
<span class="nx">extract</span><span class="p">(</span><span class="nv">$arr</span><span class="p">,</span> <span class="nx">EXTR_PREFIX_SAME</span><span class="p">,</span> <span class="s2">&#34;wddx&#34;</span><span class="p">);</span><span class="c1">//重复则覆盖，前缀为&#34;wddx&#34;
</span><span class="c1"></span><span class="k">echo</span> <span class="nv">$name</span><span class="p">;</span><span class="c1">//fin
</span></code></pre></div><p>:::</p>
<p>::: warning</p>
<p>PHP 5 里，<strong>list()</strong> 从最右边的参数开始赋值； PHP 7 里，<strong>list()</strong> 从最左边的参数开始赋值。</p>
<p>如果你用单纯的变量，不用担心这一点。 但是如果你用了具有索引的数组，通常你期望得到的结果和在 <strong>list()</strong> 中写的一样是从左到右的，但在 PHP 5 里实际上不是， 它是以相反顺序赋值的。</p>
<p>通常而言，不建议依赖于操作的顺序，在未来可能会再次发生修改。</p>
<p>:::</p>
<h4 id="操作数组">操作数组</h4>
<p><code>foreach()</code>遍历数组</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="k">foreach</span><span class="p">(</span><span class="nv">$arr</span> <span class="nv">$index</span><span class="o">=&gt;</span><span class="nv">$item</span><span class="p">){</span>
    <span class="c1">//可以获取索引和数组中的item
</span><span class="c1"></span><span class="p">}</span>
</code></pre></div><p>传址修改原数组</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="k">foreach</span> <span class="p">(</span><span class="nv">$arr</span> <span class="k">as</span> <span class="o">&amp;</span><span class="nv">$item</span><span class="p">){</span>
    <span class="c1">//do something(修改传址进来的数组元素)
</span><span class="c1"></span><span class="p">}</span>
</code></pre></div><h4 id="数组增删操作">数组增删操作</h4>
<table>
<thead>
<tr>
<th></th>
<th>增</th>
<th>删</th>
</tr>
</thead>
<tbody>
<tr>
<td>从末尾</td>
<td><code>array_push</code></td>
<td><code>array_pop</code></td>
</tr>
<tr>
<td>从开始位置</td>
<td><code>array_unshift</code></td>
<td><code>array_shift</code></td>
</tr>
</tbody>
</table>
<h4 id="其他方法类似js中">其他方法（类似JS中）</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="cm">/*遍历*/</span>
<span class="nx">array_map</span><span class="p">()</span>
<span class="nx">array_values</span><span class="p">()</span>
<span class="nx">array_keys</span><span class="p">()</span>
<span class="nx">array_filter</span><span class="p">()</span>


<span class="cm">/*判断*/</span>
<span class="nx">array_key_exists</span><span class="p">()</span>
<span class="nx">in_array</span><span class="p">()</span>

<span class="cm">/*合并*/</span>
<span class="nx">array_merge</span><span class="p">()</span><span class="c1">//[originArr,newArr]
</span><span class="c1"></span><span class="nx">array_change_key_case</span><span class="p">()</span> <span class="c1">//修改key的大小写小:0/CASE_LOWER 大:1/CASE_UPPER
</span></code></pre></div><p>::: details</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="c1">//递归实现多维数组key的大小写转换
</span><span class="c1"></span><span class="o">&lt;?</span><span class="nx">php</span>
<span class="nv">$config</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&#34;hOst&#34;</span> <span class="o">=&gt;</span> <span class="s2">&#34;localhost&#34;</span><span class="p">,</span>
    <span class="s2">&#34;POST&#34;</span> <span class="o">=&gt;</span> <span class="mi">8000</span><span class="p">,</span>
    <span class="s2">&#34;uSeR&#34;</span> <span class="o">=&gt;</span> <span class="s2">&#34;admin&#34;</span><span class="p">,</span>
    <span class="s2">&#34;cache&#34;</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s2">&#34;hOst&#34;</span> <span class="o">=&gt;</span> <span class="s2">&#34;127.0.0.1&#34;</span><span class="p">,</span>
        <span class="s2">&#34;user&#34;</span> <span class="o">=&gt;</span> <span class="p">[</span>
            <span class="s2">&#34;namE&#34;</span> <span class="o">=&gt;</span> <span class="s2">&#34;jqf&#34;</span><span class="p">,</span>
            <span class="s2">&#34;token&#34;</span> <span class="o">=&gt;</span> <span class="s2">&#34;qq9ad2437c622bdd38&#34;</span>
        <span class="p">]</span>
    <span class="p">]</span>
<span class="p">];</span>
<span class="sd">/**
</span><span class="sd"> * @param array $arr
</span><span class="sd"> * @param string $type
</span><span class="sd"> * @return array
</span><span class="sd"> */</span>
<span class="k">function</span> <span class="nf">fin_array_change_key_case</span><span class="p">(</span><span class="k">array</span> <span class="nv">$arr</span><span class="p">,</span> <span class="nx">string</span> <span class="nv">$type</span> <span class="o">=</span> <span class="s1">&#39;CASE_UPPER&#39;</span><span class="p">)</span><span class="o">:</span> <span class="k">array</span>
<span class="p">{</span>
    <span class="nv">$action</span> <span class="o">=</span> <span class="nv">$type</span> <span class="o">==</span> <span class="s2">&#34;CASE_UPPER&#34;</span> <span class="o">?</span> <span class="s1">&#39;strtoupper&#39;</span> <span class="o">:</span> <span class="s1">&#39;strtolower&#39;</span><span class="p">;</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$arr</span> <span class="k">as</span> <span class="nv">$k</span> <span class="o">=&gt;</span> <span class="nv">$v</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">//删掉原先的
</span><span class="c1"></span>        <span class="nx">unset</span><span class="p">(</span><span class="nv">$arr</span><span class="p">[</span><span class="nv">$k</span><span class="p">]);</span>
        <span class="c1">//新的数组
</span><span class="c1"></span>        <span class="nv">$arr</span><span class="p">[</span><span class="nv">$action</span><span class="p">(</span><span class="nv">$k</span><span class="p">)]</span> <span class="o">=</span> <span class="nx">is_array</span><span class="p">(</span><span class="nv">$v</span><span class="p">)</span>
            <span class="o">?</span> <span class="nx">fin_array_change_key_case</span><span class="p">(</span><span class="nv">$v</span><span class="p">)</span>
            <span class="o">:</span> <span class="nv">$v</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nv">$arr</span><span class="p">;</span>
<span class="p">}</span>

<span class="nv">$res</span> <span class="o">=</span> <span class="nx">fin_array_change_key_case</span><span class="p">(</span><span class="nv">$config</span><span class="p">);</span>
<span class="nx">print_r</span><span class="p">(</span><span class="nv">$res</span><span class="p">);</span>
</code></pre></div><p>:::</p>
<p>::: tip</p>
<p><code>array_walk_recursive($arr,function (&amp;$v,&amp;$k,$case){}</code>，专门用于递归遍历多维数组，注意其中自动传入址</p>
<p>:::</p>
<h3 id="时间相关">时间相关</h3>
<h4 id="基本操作">基本操作</h4>
<p>设置时区</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="nx">date_default_timezone_set</span><span class="p">(</span><span class="nx">timezone_identifier</span><span class="p">)</span>
</code></pre></div><p><strong>注：</strong> timezone_identifier取值有&quot;PRC&quot;，&ldquo;Asia/chongqing  &ldquo;，&ldquo;Asia/shanghai&rdquo;，&ldquo;Asia/urumqi&quot;等，分别对应时区</p>
<p>格式化时间</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="nx">date</span><span class="p">(</span><span class="s1">&#39;Y-m-d h:m:s&#39;</span><span class="p">);</span>
</code></pre></div><p>时间戳</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="nx">time</span><span class="p">()</span>
<span class="nx">microtime</span><span class="p">(</span><span class="k">true</span><span class="p">)</span><span class="c1">//true 返回浮点数 false 返回字符串
</span></code></pre></div><p>::: details</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span>
<span class="c1">//得到函数执行时间的函数
</span><span class="c1"></span><span class="sd">/**测试函数执行时间
</span><span class="sd"> * @param null $begin
</span><span class="sd"> * @param null $end
</span><span class="sd"> * @return array|float|mixed|string
</span><span class="sd"> */</span>
<span class="k">function</span> <span class="nf">runtime</span><span class="p">(</span><span class="nv">$begin</span> <span class="o">=</span> <span class="k">null</span><span class="p">,</span> <span class="nv">$end</span> <span class="o">=</span> <span class="k">null</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">static</span> <span class="nv">$cache</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">is_null</span><span class="p">(</span><span class="nv">$begin</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$cache</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nx">is_null</span><span class="p">(</span><span class="nv">$end</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$cache</span><span class="p">[</span><span class="nv">$begin</span><span class="p">]</span> <span class="o">=</span> <span class="nx">microtime</span><span class="p">(</span><span class="k">true</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">//👇🏼！！！！
</span><span class="c1"></span>        <span class="nv">$end</span> <span class="o">=</span> <span class="nv">$cache</span><span class="p">[</span><span class="nv">$end</span><span class="p">]</span> <span class="o">??</span> <span class="nx">microtime</span><span class="p">(</span><span class="k">true</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">round</span><span class="p">(</span><span class="nv">$end</span> <span class="o">-</span> <span class="nv">$cache</span><span class="p">[</span><span class="nv">$begin</span><span class="p">],</span><span class="mi">2</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">//测试for和while循环
</span><span class="c1"></span><span class="nv">$LEN</span><span class="o">=</span><span class="mi">10000000</span><span class="p">;</span>

<span class="c1">//1.for
</span><span class="c1"></span><span class="nx">runtime</span><span class="p">(</span><span class="s1">&#39;for&#39;</span><span class="p">);</span>
<span class="k">for</span> <span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="nv">$LEN</span><span class="p">;</span> <span class="nv">$i</span><span class="o">++</span><span class="p">)</span> <span class="p">{}</span>
<span class="nx">runtime</span><span class="p">(</span><span class="s1">&#39;forEnd&#39;</span><span class="p">);</span>
<span class="k">echo</span> <span class="s1">&#39;for循环:&#39;</span><span class="o">.</span><span class="nx">runtime</span><span class="p">(</span><span class="s1">&#39;for&#39;</span><span class="p">,</span> <span class="s1">&#39;forEnd&#39;</span><span class="p">);</span>

<span class="k">echo</span> <span class="s2">&#34;&lt;hr&gt;&#34;</span><span class="p">;</span>

<span class="c1">//2.while
</span><span class="c1"></span><span class="nx">runtime</span><span class="p">(</span><span class="s1">&#39;while&#39;</span><span class="p">);</span>
<span class="nv">$i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
<span class="k">while</span> <span class="p">(</span><span class="nv">$i</span><span class="o">&lt;</span><span class="nv">$LEN</span><span class="p">){</span><span class="nv">$i</span><span class="o">++</span><span class="p">;};</span>
<span class="nx">runtime</span><span class="p">(</span><span class="s1">&#39;whileEnd&#39;</span><span class="p">);</span>
<span class="k">echo</span> <span class="s1">&#39;while循环:&#39;</span><span class="o">.</span><span class="nx">runtime</span><span class="p">(</span><span class="s1">&#39;while&#39;</span><span class="p">,</span> <span class="s1">&#39;whileEnd&#39;</span><span class="p">);</span>
<span class="k">echo</span> <span class="s2">&#34;&lt;hr&gt;&#34;</span><span class="p">;</span>
<span class="k">echo</span> <span class="s1">&#39;总执行时间:&#39;</span><span class="o">.</span><span class="nx">runtime</span><span class="p">(</span><span class="s1">&#39;for&#39;</span><span class="p">,</span><span class="s1">&#39;whileEnd&#39;</span><span class="p">);</span>
</code></pre></div><p>:::</p>
<h4 id="一些相关函数">一些相关函数</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span>
<span class="c1">//date() =&gt;填参数得到不同的结果
</span><span class="c1">//getdate() =&gt;返回数组
</span><span class="c1"></span>
<span class="cm">/*转为时间戳*/</span>
<span class="c1">//具体查手册
</span><span class="c1">//strtotime() =&gt;参数为str,比如&#34;NOW&#34;,&#34;2020-04-02 10:00:00&#34;...
</span><span class="c1">//strtotime(&#39;+1 year +10 day&#39;)=&gt;1年10天后
</span><span class="c1">//strtotime(&#39;next friday&#39;)=&gt;下个星期五
</span></code></pre></div><h4 id="内置时间类">内置时间类</h4>
<p><strong>Date()对象</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span>

<span class="c1">//new Date()-&gt;format()//%m月%d天%h小时,一共%a天
</span><span class="c1">//new Date()-&gt;setdate()
</span><span class="c1">//new Date()-&gt;diff() 获取俩时间差值
</span><span class="c1">//...
</span><span class="c1"></span>
</code></pre></div><p><strong>DateInterval()对象</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="c1">//参数&#39;P2DT2H5M&#39;=&gt;增加2d2h5m
</span><span class="c1">//P-&gt;开始,  D-&gt;&#39;day&#39;,  T-&gt;分割日期和时间
</span><span class="c1">//配合new Date-&gt;add($interval)函数使用！！！
</span></code></pre></div><h3 id="正则表达式">正则表达式</h3>
<p><strong>相关函数</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span>
<span class="c1">//preg_match(reg,str,res) =&gt;匹配一个
</span><span class="c1">//preg_match_all()=&gt;所有
</span><span class="c1"></span>
<span class="c1">//preg_split(reg,str)=&gt;拆分字符串，返回处理后结果
</span><span class="c1"></span>
<span class="c1">//preg_replace(reg,val_replace,str)=&gt;替换
</span><span class="c1">//preg_replace_callback(reg,fn,str)=&gt;fn中接收$matches实现复杂逻辑
</span></code></pre></div><p>::: warning</p>
<p>注意字符串操作函数的区别,<code>str_split</code> 等</p>
<p>:::</p>
<h2 id="cookie">COOKIE</h2>
<p>cookie是客户端存储数据的手段，并在请求服务器时自动携带cookie数据。</p>
<p>::: tip</p>
<p>COOKIE 保存在浏览器</p>
<p>:::</p>
<h3 id="设置">设置</h3>
<p>⚡ <code>setcookie()</code></p>
<p><strong>参数:</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>name</strong></td>
<td>Cookie的名称</td>
</tr>
<tr>
<td><strong>value</strong></td>
<td>cookie的价值。该值存储在客户端计算机上; 不要存储敏感信息</td>
</tr>
<tr>
<td><strong>expires</strong></td>
<td>Cookie过期的时间。这是一个Unix时间戳，可以使用<a class="link" href="https://www.php.net/manual/en/function.time.php"  target="_blank" rel="noopener"
    >time（）</a>函数加上希望它到期之前的秒数来设置它。</td>
</tr>
<tr>
<td><strong>path</strong></td>
<td>服务器上可以使用cookie的路径。如果设置为*“/”*，则cookie将在整个范围内可用</td>
</tr>
<tr>
<td><strong>domain</strong></td>
<td>cookie可用的域。（例如*“www.houdunren.com”*）将使cookie可用于该子域及其所有其他子域（即w2.www.houdunren.com）。要使cookie可用于整个域（包括其所有子域），只需将值设置为域名（在本例中为*“houdunren.com”*）</td>
</tr>
<tr>
<td><strong>secure</strong></td>
<td>表示cookie应仅通过客户端的安全HTTPS连接传输</td>
</tr>
<tr>
<td><strong>httponly</strong></td>
<td>当<strong>TRUE</strong>cookie只能通过HTTP协议访问时。这意味着脚本语言（例如JavaScript）无法访问cookie。</td>
</tr>
</tbody>
</table>
<p>来源: <a class="link" href="https://houdunren.gitee.io/note/php/8%20%E4%BC%9A%E8%AF%9D%E6%8E%A7%E5%88%B6.html#%E8%AE%BE%E7%BD%AE"  target="_blank" rel="noopener"
    >后盾人教程</a></p>
<h2 id="session">SESSION</h2>
<h3 id="概述">概述</h3>
<p>session是服务器会话状态，可用于记录访问用户后台会话数据。不同用户或一个用户用不同浏览器在同一网站发起php请求会产生不同的session，然后保存在本地文件夹(session.save_path)或者其它端。</p>
<p>::: tip</p>
<p>与COOKIE不同，SESSION保存在本地</p>
<p>:::</p>
<p><img src="https://gitee.com/fintinger/figure-bed/raw/master//images/20201002191828.png" alt="Chrome中"  /></p>
<p>保存的session在同一域下都可以通过<code>$_SESSION</code>访问到，为数组形式。</p>
<h3 id="基本使用">基本使用</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="nx">session_start</span><span class="p">();</span><span class="c1">//开始
</span><span class="c1"></span><span class="nv">$_SESSION</span><span class="p">[</span><span class="s2">&#34;web&#34;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&#34;https://www.fintinger.xyz&#34;</span><span class="p">;</span><span class="c1">//设置数据
</span><span class="c1"></span><span class="nx">print_r</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">);</span><span class="c1">//可以通过超全局数组获取
</span></code></pre></div><h3 id="配置">配置</h3>
<h4 id="session储存目录">SESSION储存目录</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="nx">session_save_path</span><span class="p">(</span><span class="s2">&#34;./temp&#34;</span><span class="p">);</span><span class="c1">//查看或设置
</span></code></pre></div><h4 id="自定义namevalue">自定义Name&amp;Value</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="c1">//id一般在自定义session引擎的时候设置
</span><span class="c1"></span><span class="nx">session_name</span><span class="p">(</span><span class="s2">&#34;jqf&#34;</span><span class="p">);</span>
<span class="nx">session_id</span><span class="p">(</span><span class="s2">&#34;123&#34;</span><span class="p">);</span>
<span class="nx">session_start</span><span class="p">();</span><span class="c1">//配置在开始之前
</span></code></pre></div><p><img src="https://gitee.com/fintinger/figure-bed/raw/master//images/20201002193918.png" alt="自定义Name&amp;amp;Value"  /></p>
<h3 id="gc垃圾回收机制">GC垃圾回收机制</h3>
<blockquote>
<p>如果使用默认的SESSION处理引擎，修改php.ini的配置即可</p>
</blockquote>
<h4 id="过期时间">过期时间</h4>
<p><code>session.gc_maxlifetime</code> 设置文件过期时间，默认为1440s = 24min。</p>
<p>::: tip</p>
<p>如果(下面讲到的概率)调用这个函数，就会遍历保存SESSION的文件夹，判断如果本次产生SESSION与上次产生相差超过24min就会删除上次产生的SESSION，更新为本次保存的SESSION($session_id不会改变，即文件名)。</p>
<p>:::</p>
<h4 id="调用概率">调用概率</h4>
<blockquote>
<p>如果每次调用php，都回去保存SESSOIN的文件夹遍历，进行垃圾回收(GC)，当用户量很多时，就会很大程度上影响性能，因此加入了概率这一概念，即每次调用php时，启动垃圾回收程序的概率<code>session.gc_probability/session.gc_divisor</code></p>
</blockquote>
<p>👉 <code>session.gc_probability</code> 基率</p>
<p>session清除无效session的基率。</p>
<p>👉 <code>session.gc_divisor </code></p>
<p>启动垃圾回收程序的概率。概率计算公式为：session.gc_probability / session.gc_divisor，如果网站访问量大建议将概率降低如 1 / 1000 ~ 5000。</p>
<h3 id="自定义session处理引擎">自定义SESSION处理引擎</h3>
<h4 id="使用">使用</h4>
<p>::: warning</p>
<p>在start之前设置，<code>session_set_save_handle(new FileHandle)</code>括号中为自定义的处理类</p>
<p>:::</p>
<p>然后按照正常session处理使用即可！</p>
<h4 id="定义">定义</h4>
<p>🎈 使用 <code>SessionHandlerInterface</code> 接口(implements)</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="k">class</span> <span class="nc">FileHandle</span> <span class="nx">inplements</span> <span class="nx">SessionlandlerInterface</span><span class="p">{}</span>
</code></pre></div><p>🎈<strong>标准模板</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span>


<span class="k">class</span> <span class="nc">FileHandle</span> <span class="k">implements</span> <span class="nx">SessionHandlerInterface</span>
<span class="p">{</span>

    <span class="sd">/**
</span><span class="sd">     * @inheritDoc
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">close</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// TODO: Implement close() method.
</span><span class="c1"></span>    <span class="p">}</span>

    <span class="sd">/**
</span><span class="sd">     * @inheritDoc
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">destroy</span><span class="p">(</span><span class="nv">$session_id</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// TODO: Implement destroy() method.
</span><span class="c1"></span>    <span class="p">}</span>

    <span class="sd">/**
</span><span class="sd">     * @inheritDoc
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">gc</span><span class="p">(</span><span class="nv">$maxlifetime</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// TODO: Implement gc() method.
</span><span class="c1"></span>    <span class="p">}</span>

    <span class="sd">/**
</span><span class="sd">     * @inheritDoc
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">open</span><span class="p">(</span><span class="nv">$save_path</span><span class="p">,</span> <span class="nv">$name</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// TODO: Implement open() method.
</span><span class="c1"></span>    <span class="p">}</span>

    <span class="sd">/**
</span><span class="sd">     * @inheritDoc
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">read</span><span class="p">(</span><span class="nv">$session_id</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// TODO: Implement read() method.
</span><span class="c1"></span>    <span class="p">}</span>

    <span class="sd">/**
</span><span class="sd">     * @inheritDoc
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">write</span><span class="p">(</span><span class="nv">$session_id</span><span class="p">,</span> <span class="nv">$session_data</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// TODO: Implement write() method.
</span><span class="c1"></span>    <span class="p">}</span>

<span class="p">}</span>
</code></pre></div><p>逐一实现其中方法即可！</p>
<h4 id="实例">实例</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span>

<span class="sd">/**
</span><span class="sd"> * Class FileHandle
</span><span class="sd"> * @param $path //session储存路径
</span><span class="sd"> * @param $maxlifetime //session文件过期时间
</span><span class="sd"> */</span>
<span class="k">class</span> <span class="nc">FileHandle</span> <span class="k">implements</span> <span class="nx">SessionHandlerInterface</span>
<span class="p">{</span>

    <span class="k">protected</span> <span class="nv">$path</span><span class="p">;</span>

    <span class="k">protected</span> <span class="nv">$maxlifetime</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nv">$path</span> <span class="o">=</span> <span class="s2">&#34;session&#34;</span><span class="p">,</span> <span class="nv">$maxlifetime</span> <span class="o">=</span> <span class="s2">&#34;1440&#34;</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">path</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">mkdir</span><span class="p">(</span><span class="nv">$path</span><span class="p">);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">maxlifetime</span> <span class="o">=</span> <span class="nv">$maxlifetime</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="k">function</span> <span class="nf">mkdir</span><span class="p">(</span><span class="nv">$path</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">is_dir</span><span class="p">(</span><span class="nv">$path</span><span class="p">)</span> <span class="o">||</span> <span class="nx">mkdir</span><span class="p">(</span><span class="nv">$path</span><span class="p">);</span>

        <span class="k">return</span> <span class="nx">realpath</span><span class="p">(</span><span class="nv">$path</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">close</span><span class="p">()</span><span class="o">:</span> <span class="nx">bool</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">destroy</span><span class="p">(</span><span class="nv">$session_id</span><span class="p">)</span><span class="o">:</span> <span class="nx">bool</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">is_file</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">path</span><span class="o">.</span><span class="s2">&#34;/&#34;</span><span class="o">.</span><span class="nv">$session_id</span><span class="p">))</span> <span class="p">{</span>
            <span class="o">@</span><span class="nx">unlink</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">path</span><span class="o">.</span><span class="s2">&#34;/&#34;</span><span class="o">.</span><span class="nv">$session_id</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">gc</span><span class="p">(</span><span class="nv">$maxlifetime</span><span class="p">)</span><span class="o">:</span> <span class="nx">bool</span>
    <span class="p">{</span>
        <span class="k">foreach</span> <span class="p">(</span><span class="nx">glob</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">path</span><span class="o">.</span><span class="s2">&#34;/*&#34;</span><span class="p">)</span> <span class="k">as</span> <span class="nv">$file</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">filemtime</span><span class="p">(</span><span class="nv">$file</span><span class="p">)</span> <span class="o">+</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">maxlifetime</span> <span class="o">&lt;</span> <span class="nx">time</span><span class="p">())</span> <span class="p">{</span>
                <span class="o">@</span><span class="nx">unlink</span><span class="p">(</span><span class="nv">$file</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
    <span class="p">}</span>


    <span class="k">public</span> <span class="k">function</span> <span class="nf">open</span><span class="p">(</span><span class="nv">$path</span><span class="p">,</span> <span class="nv">$name</span><span class="p">)</span><span class="o">:</span> <span class="nx">bool</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">read</span><span class="p">(</span><span class="nv">$session_id</span><span class="p">)</span><span class="o">:</span> <span class="nx">string</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span><span class="nx">string</span><span class="p">)</span><span class="o">@</span><span class="nx">file_get_contents</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">path</span><span class="o">.</span><span class="s2">&#34;/&#34;</span><span class="o">.</span><span class="nv">$session_id</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">write</span><span class="p">(</span><span class="nv">$session_id</span><span class="p">,</span> <span class="nv">$session_data</span><span class="p">)</span><span class="o">:</span> <span class="nx">bool</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span><span class="nx">bool</span><span class="p">)</span><span class="o">@</span><span class="nx">file_put_contents</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">path</span><span class="o">.</span><span class="s2">&#34;/&#34;</span><span class="o">.</span><span class="nv">$session_id</span><span class="p">,</span> <span class="nv">$session_data</span><span class="p">);</span>
    <span class="p">}</span>

<span class="p">}</span>
</code></pre></div><p><strong>注意：</strong></p>
<p>⚡ 处理的路径要为绝对路径才行，可以利用<code>realpath($path)</code>得到</p>
<p>⚡ 实现的方法就是，“开，关，读，写，卸，垃”，本方法中&quot;开，关&quot;没有做过多的处理</p>
<h4 id="whatt-more">What&rsquo;t more💭</h4>
<p>在write方法中添加延迟<code>sleep()</code>，并且修改<code>php.ini</code> 中的调用概率为1(<code>session.gc_divisor </code>=1)，即每次都调用垃圾回收，就可以看到session是在删除之后再被重新创建的！</p>
<h2 id="文件操作">文件操作</h2>
<h3 id="指针操作函数">指针操作函数</h3>
<p><code>fseek($handle,int offset)</code> =&gt;移动文件中指针</p>
<p><code>fread($handle,length)</code> =&gt;读取文件操作，指针会自动移动到length位置</p>
<p>::: tip</p>
<p>$handle 为<code>source</code> 类型，通过<code>fopen()</code>函数获得</p>
<p>:::</p>
<h3 id="文件打开与写入操作fopen函数详解">文件打开与写入操作fopen函数详解：</h3>
<p><code>fopen($path,mode)</code> ,mode的取值如下</p>
<table>
<thead>
<tr>
<th>模式</th>
<th>功能</th>
<th>+模式</th>
<th>二进制文件</th>
<th>文件不存在</th>
<th>文件存在</th>
</tr>
</thead>
<tbody>
<tr>
<td>r</td>
<td>读取文件不可写</td>
<td>r+可写入文件</td>
<td>r+b 操作二进制文件</td>
<td>创建</td>
<td>操作</td>
</tr>
<tr>
<td>w</td>
<td>从头写入，不可读</td>
<td>w+可读取文件</td>
<td>w+b..</td>
<td>创建</td>
<td>操作</td>
</tr>
<tr>
<td>a</td>
<td>追加内容不可读取</td>
<td>a+可读取</td>
<td>a+b</td>
<td>创建</td>
<td>操作</td>
</tr>
<tr>
<td>x</td>
<td>从头写入，不可读</td>
<td>x+可读</td>
<td>x+b</td>
<td>创建</td>
<td>不会打开，fopen返回false，产生一个警告</td>
</tr>
</tbody>
</table>
<p>::: warning</p>
<p>操作二进制文件(图片等，需要设置头信息)，比如:<code>header('Content-type:image/jpg');</code></p>
<p>:::</p>
<h3 id="其他操作函数">其他操作函数</h3>
<p>读取操作</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span>
<span class="nv">$handle</span><span class="o">=</span><span class="nx">fopen</span><span class="p">(</span><span class="s2">&#34;file/test.txt&#34;</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">);</span>

<span class="c1">//feof($handle)=&gt;文件读取是否完毕
</span><span class="c1">//while (!feof($handle)){
</span><span class="c1">//    echo fread($handle,1);
</span><span class="c1">//}
</span><span class="c1"></span>

<span class="c1">//fgetc($handle)=&gt;每次读取一个字符！
</span><span class="c1"></span><span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="nx">feof</span><span class="p">(</span><span class="nv">$handle</span><span class="p">)){</span>
    <span class="k">echo</span> <span class="nx">fgetc</span><span class="p">(</span><span class="nv">$handle</span><span class="p">);</span>
<span class="p">}</span>


<span class="c1">//fgets($handle)=&gt; 每次一行！
</span><span class="c1"></span>
<span class="c1">//fgetss($handle)=&gt;v7.3弃用，
</span><span class="c1">//fgetcsv($handle,split)=&gt;读取，并指定用什么分割开来
</span></code></pre></div><p>权限判断，检查文件</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="c1">//文件&amp;目录权限
</span><span class="c1">//is_writable()
</span><span class="c1">//is_readable()
</span><span class="c1"></span>
<span class="c1">//文件&amp;目录检查
</span><span class="c1">//file_exists()
</span><span class="c1">//is_file()&amp;is_dir()
</span></code></pre></div><h3 id="快速读取写入文件">快速读取&amp;写入文件</h3>
<p><code>file_get_contents(filename|url)</code> 获取文件内容</p>
<p><code>file_put_contents(filename,data)</code> =&gt;w模式写入</p>
<p><code>file_put_contents(filename,data,FILE_APPEND)</code> =&gt;a模式写入</p>
<h3 id="文件复制移动">文件复制移动</h3>
<p><strong>文件复制</strong></p>
<p><code>copy($source,$dest)</code></p>
<p><strong>文件移动</strong></p>
<p><code>rename($oldname,$newname)</code></p>
<p><strong>注：</strong> <code>rename()</code> 同时具有重命名和移动文件的功能</p>
<h3 id="目录操作函数">目录操作函数</h3>
<p>👉 <code>is_dir()</code></p>
<p><strong>用途：</strong> 判断是否存在该目录</p>
<p>👉 <code>mkdir($pathname,mode,recursive)</code></p>
<p><strong>参数：</strong></p>
<p>[1] <strong>$pathname</strong> 路径</p>
<p>[2] <strong>mode</strong> 默认0777,意味着最大可能的访问权，一般设定为0755</p>
<p>::: warning</p>
<p>mode在windows 下被忽略</p>
<p>:::</p>
<p><strong>recursive</strong> 是否递归创建，</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="nx">mkdir</span><span class="p">(</span><span class="s2">&#34;a/b/c&#34;</span><span class="p">,</span><span class="mo">0755</span><span class="p">,</span><span class="k">true</span><span class="p">)</span>
</code></pre></div><p>👉 <code>readdir()</code></p>
<p><strong>说明：</strong> 调用一次就读取一个当前目录下的文件或文件夹，读取不到则返回false</p>
<p><strong>注意：</strong> readdir 方法会读取到&rdquo;.&rdquo; 和 &ldquo;..&ldquo;这两个默认存在的目录</p>
<p>👉 <code>scandir()</code></p>
<p><strong>说明：</strong> 相当于循环<code>readdir()</code></p>
<p>👉 <code>glob()</code></p>
<p><strong>说明：</strong> 目录的遍历操作</p>
<p><strong>参数：</strong></p>
<p>[1] pattern 模式</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="nx">glob</span><span class="p">(</span><span class="s2">&#34;./*&#34;</span><span class="p">)</span><span class="c1">//当前路径下所有
</span><span class="c1"></span><span class="nx">glob</span><span class="p">(</span><span class="s2">&#34;./*.php&#34;</span><span class="p">)</span><span class="c1">//当前路径下的php文件
</span><span class="c1"></span><span class="nx">glob</span><span class="p">(</span><span class="s2">&#34;{./*.php,*.txt}&#34;</span><span class="p">)</span><span class="c1">//当前路径下php和txt
</span></code></pre></div><p>[2] flag</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="c1">//GLOB_MARK =&gt;后面补 &#34;/&#34;
</span><span class="c1">//GLOB_NOSORT =&gt;使用系统默认排序
</span><span class="c1">//GLOB_ERR =&gt;没有权限操作目录时，停止所有动作（默认跳过）
</span><span class="c1">//GLOB_NOCHECK =&gt;目录不存在，返回模式
</span></code></pre></div><h3 id="共享锁和独占锁">共享锁和独占锁</h3>
<blockquote>
<p><code>flock($handle,$operation)</code> 函数用来给文件上锁</p>
</blockquote>
<table>
<thead>
<tr>
<th>$operation</th>
<th>名称</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>LOCK_SH</td>
<td>共享锁</td>
<td>如果是读取，不需要等待，但如果是写入，需要等待读取完成。</td>
</tr>
<tr>
<td>LOCK_EX</td>
<td>独占锁</td>
<td>无论写入/读取都需要等待。</td>
</tr>
<tr>
<td>LOCK_UN</td>
<td>释放锁</td>
<td>无论使用共享/读占锁，使用完后需要解锁。</td>
</tr>
<tr>
<td>LOCK_NB</td>
<td></td>
<td>当被锁定时，不阻塞，而是提示锁定</td>
</tr>
</tbody>
</table>
<p>::: warning</p>
<p>windows不支持<code>$operation = LOCN_NB</code> ，也不支持flock的第四个参数,具体<a class="link" href="https://www.php.net/manual/zh/function.flock.php"  target="_blank" rel="noopener"
    >GO</a></p>
<p>:::</p>
<blockquote>
<p><strong>情景1</strong> 用户u1正在读取文件，u2的写入操作等到u1读取完毕之后(产生阻塞)才能再进行</p>
</blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="c1">//u1.php
</span><span class="c1"></span><span class="nv">$handle</span><span class="o">=</span><span class="nx">fopen</span><span class="p">(</span><span class="s2">&#34;jqf.txt&#34;</span><span class="p">,</span><span class="s2">&#34;r&#34;</span><span class="p">);</span>
<span class="nx">flock</span><span class="p">(</span><span class="nv">$handle</span><span class="p">,</span><span class="nx">LOCK_SH</span><span class="p">);</span>
<span class="nx">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span><span class="c1">//模拟写入操作的延时
</span><span class="c1"></span><span class="k">echo</span> <span class="nx">fread</span><span class="p">(</span><span class="nv">$handle</span><span class="p">,</span><span class="mi">99</span><span class="p">);</span>
<span class="nx">flock</span><span class="p">(</span><span class="nv">$handle</span><span class="p">,</span><span class="nx">LOCK_UN</span><span class="p">);</span>
<span class="nx">fclose</span><span class="p">(</span><span class="nv">$handle</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="c1">//u2.php
</span><span class="c1"></span><span class="nv">$handle</span> <span class="o">=</span> <span class="nx">fopen</span><span class="p">(</span><span class="s2">&#34;jqf.txt&#34;</span><span class="p">,</span> <span class="s2">&#34;a+&#34;</span><span class="p">);</span>
<span class="nx">flock</span><span class="p">(</span><span class="nv">$handle</span><span class="p">,</span> <span class="nx">LOCK_EX</span><span class="p">);</span>
<span class="nx">fwrite</span><span class="p">(</span><span class="nv">$handle</span><span class="p">,</span> <span class="s1">&#39;*hm&#39;</span><span class="p">);</span>
<span class="nx">fseek</span><span class="p">(</span><span class="nv">$handle</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="k">echo</span> <span class="nx">fread</span><span class="p">(</span><span class="nv">$handle</span><span class="p">,</span> <span class="mi">99</span><span class="p">);</span>
<span class="nx">flock</span><span class="p">(</span><span class="nv">$handle</span><span class="p">,</span><span class="nx">LOCK_UN</span><span class="p">);</span>
<span class="nx">fclose</span><span class="p">(</span><span class="nv">$handle</span><span class="p">);</span>
</code></pre></div><blockquote>
<p><strong>情景2</strong> u1写完之后（产生阻塞）u2才能读取</p>
</blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="c1">//u1.php
</span><span class="c1"></span><span class="nv">$handle</span> <span class="o">=</span> <span class="nx">fopen</span><span class="p">(</span><span class="s1">&#39;jqf.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;a+&#39;</span><span class="p">);</span>
<span class="nx">flock</span><span class="p">(</span><span class="nv">$handle</span><span class="p">,</span> <span class="nx">LOCK_EX</span><span class="p">);</span>
<span class="nx">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
<span class="nx">fwrite</span><span class="p">(</span><span class="nv">$handle</span><span class="p">,</span> <span class="s1">&#39;*hm&#39;</span><span class="p">);</span>
<span class="nx">fseek</span><span class="p">(</span><span class="nv">$handle</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="k">echo</span> <span class="nx">fread</span><span class="p">(</span><span class="nv">$handle</span><span class="p">,</span> <span class="mi">99</span><span class="p">);</span>
<span class="nx">flock</span><span class="p">(</span><span class="nv">$handle</span><span class="p">,</span> <span class="nx">LOCK_UN</span><span class="p">);</span>
<span class="nx">fclose</span><span class="p">(</span><span class="nv">$handle</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="c1">//u2.php
</span><span class="c1"></span><span class="nv">$handle</span><span class="o">=</span><span class="nx">fopen</span><span class="p">(</span><span class="s1">&#39;jqf.txt&#39;</span><span class="p">,</span><span class="s1">&#39;r+&#39;</span><span class="p">);</span>
<span class="nx">flock</span><span class="p">(</span><span class="nv">$handle</span><span class="p">,</span><span class="nx">LOCK_SH</span><span class="p">);</span>
<span class="k">echo</span> <span class="nx">fread</span><span class="p">(</span><span class="nv">$handle</span><span class="p">,</span><span class="mi">99</span><span class="p">);</span>
<span class="nx">flock</span><span class="p">(</span><span class="nv">$handle</span><span class="p">,</span><span class="nx">LOCK_UN</span><span class="p">);</span>
<span class="nx">fclose</span><span class="p">(</span><span class="nv">$handle</span><span class="p">);</span>
</code></pre></div><h3 id="关于文件和目录操作常用的一些函数">关于文件和目录操作常用的一些函数</h3>
<p><strong>[1] 格式化获取磁盘大小以及磁盘可用大小</strong></p>
<p>::: details</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="sd">/**格式化获取磁盘空间大小
</span><span class="sd"> * 注意数组的顺序，判断由大到小!!!!
</span><span class="sd"> * @param int $total
</span><span class="sd"> * @return string
</span><span class="sd"> */</span>
<span class="k">function</span> <span class="nf">space_total</span><span class="p">(</span><span class="nx">int</span> <span class="nv">$total</span><span class="p">)</span><span class="o">:</span><span class="nx">string</span>
<span class="p">{</span>
    <span class="nv">$config</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="o">=&gt;</span><span class="s1">&#39;GB&#39;</span><span class="p">,</span><span class="mi">2</span><span class="o">=&gt;</span><span class="s1">&#39;MB&#39;</span><span class="p">,</span><span class="mi">1</span><span class="o">=&gt;</span><span class="s1">&#39;KB&#39;</span><span class="p">];</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$config</span> <span class="k">as</span> <span class="nv">$num</span><span class="o">=&gt;</span><span class="nv">$unit</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$total</span><span class="o">&gt;</span><span class="nx">pow</span><span class="p">(</span><span class="mi">1024</span><span class="p">,</span><span class="nv">$num</span><span class="p">)){</span>
            <span class="k">return</span> <span class="nx">round</span><span class="p">(</span><span class="nv">$total</span><span class="o">/</span><span class="nx">pow</span><span class="p">(</span><span class="mi">1024</span><span class="p">,</span><span class="nv">$num</span><span class="p">))</span><span class="o">.</span><span class="nv">$unit</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nv">$total</span><span class="o">.</span><span class="s1">&#39;B&#39;</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">echo</span> <span class="s2">&#34;&lt;hr&gt;&#34;</span><span class="p">;</span>
<span class="k">echo</span> <span class="s1">&#39;磁盘总大小：&#39;</span><span class="o">.</span><span class="nx">space_total</span><span class="p">(</span><span class="nx">disk_total_space</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">));</span>
<span class="k">echo</span> <span class="s2">&#34;&lt;hr&gt;&#34;</span><span class="p">;</span>
<span class="k">echo</span> <span class="s1">&#39;剩余大小：&#39;</span><span class="o">.</span><span class="nx">space_total</span><span class="p">(</span><span class="nx">disk_free_space</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">));</span>
</code></pre></div><p>:::</p>
<p><strong>[2]利用filetime实现缓存机制</strong></p>
<p>::: details</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="sd">/**
</span><span class="sd"> * 如果刷新页面前后不超过10s，将会一直走缓存,否则会更新缓存
</span><span class="sd"> * ob_start()&amp;ob_get_contents()可以在引入时获取引入内容
</span><span class="sd"> */</span>
<span class="nv">$CACHE</span> <span class="o">=</span> <span class="s1">&#39;file/文件缓存/file.cache.php&#39;</span><span class="p">;</span>
<span class="nv">$BLADE</span> <span class="o">=</span> <span class="s1">&#39;file/文件缓存/file.blade.php&#39;</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="nx">is_file</span><span class="p">(</span><span class="nv">$CACHE</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">filemtime</span><span class="p">(</span><span class="nv">$CACHE</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nx">time</span><span class="p">()</span> <span class="o">-</span> <span class="mi">10</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">&#39;is cache...&#39;</span><span class="p">;</span>
    <span class="k">include</span> <span class="nv">$CACHE</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">ob_start</span><span class="p">();</span>
    <span class="k">include</span> <span class="nv">$BLADE</span><span class="p">;</span>
    <span class="nv">$content</span> <span class="o">=</span> <span class="nx">ob_get_contents</span><span class="p">();</span>
    <span class="nx">file_put_contents</span><span class="p">(</span><span class="nv">$CACHE</span><span class="p">,</span> <span class="nv">$content</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><p>:::</p>
<p><strong>[3] 利用var_export()快速生成配置文件</strong></p>
<p>::: tip</p>
<p>var_export 类似于 var_dump，当其第二个参数为TRUE时，会返回一个变量，而不是输出它</p>
<p>:::</p>
<p>::: details</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span>
<span class="nv">$db</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;host&#34;</span> <span class="o">=&gt;</span> <span class="s2">&#34;localhost&#34;</span><span class="p">,</span> <span class="s2">&#34;port&#34;</span> <span class="o">=&gt;</span> <span class="mi">2000</span><span class="p">,</span> <span class="s2">&#34;pwd&#34;</span> <span class="o">=&gt;</span> <span class="s2">&#34;admin888&#34;</span><span class="p">];</span>
<span class="c1">//不带true会输出符合php语法的数组
</span><span class="c1"></span><span class="nv">$config</span> <span class="o">=</span> <span class="nx">var_export</span><span class="p">(</span><span class="nv">$db</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>

<span class="nx">file_put_contents</span><span class="p">(</span><span class="s1">&#39;file/var_export_config.php&#39;</span><span class="p">,</span> <span class="s2">&#34;&lt;?php return &#34;</span> <span class="o">.</span> <span class="nv">$config</span> <span class="o">.</span> <span class="s2">&#34;;&#34;</span><span class="p">);</span>
</code></pre></div><p>:::</p>
<p><strong>[4] 统计目录大小</strong></p>
<p>::: details</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="sd">/**统计目录大小
</span><span class="sd"> * @param string $dir
</span><span class="sd"> * @return int
</span><span class="sd"> */</span>
<span class="k">function</span> <span class="nf">dir_size</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$dir</span> <span class="o">=</span> <span class="s2">&#34;.&#34;</span><span class="p">)</span><span class="o">:</span> <span class="nx">int</span>
<span class="p">{</span>
    <span class="nv">$size</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="nx">glob</span><span class="p">(</span><span class="nv">$dir</span> <span class="o">.</span> <span class="s2">&#34;/*&#34;</span><span class="p">)</span> <span class="k">as</span> <span class="nv">$file</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$size</span> <span class="o">+=</span> <span class="nx">is_file</span><span class="p">(</span><span class="nv">$file</span><span class="p">)</span><span class="o">?</span><span class="nx">filesize</span><span class="p">(</span><span class="nv">$file</span><span class="p">)</span><span class="o">:</span><span class="nx">dir_size</span><span class="p">(</span><span class="nv">$file</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nv">$size</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div><p>:::</p>
<p><strong>[5] 递归复制整体目录</strong></p>
<p>:::details</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="sd">/**递归复制整体目录
</span><span class="sd"> * @param string $from
</span><span class="sd"> * @param string $to
</span><span class="sd"> * @return bool
</span><span class="sd"> */</span>
<span class="k">function</span> <span class="nf">copy_dir</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$from</span><span class="p">,</span> <span class="nx">string</span> <span class="nv">$to</span><span class="p">)</span><span class="o">:</span> <span class="nx">bool</span>
<span class="p">{</span>
    <span class="o">!</span><span class="nx">is_dir</span><span class="p">(</span><span class="nv">$to</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">mkdir</span><span class="p">(</span><span class="nv">$to</span><span class="p">,</span> <span class="mo">0755</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="nx">glob</span><span class="p">(</span><span class="nv">$from</span> <span class="o">.</span> <span class="s2">&#34;/*&#34;</span><span class="p">)</span> <span class="k">as</span> <span class="nv">$file</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$target</span> <span class="o">=</span> <span class="nv">$to</span> <span class="o">.</span> <span class="s2">&#34;/&#34;</span> <span class="o">.</span> <span class="nx">basename</span><span class="p">(</span><span class="nv">$file</span><span class="p">);</span>
        <span class="nx">is_file</span><span class="p">(</span><span class="nv">$file</span><span class="p">)</span>
            <span class="o">?</span> <span class="nx">copy</span><span class="p">(</span><span class="nv">$file</span><span class="p">,</span> <span class="nv">$target</span><span class="p">)</span>
            <span class="o">:</span> <span class="nx">copy_dir</span><span class="p">(</span><span class="nv">$file</span><span class="p">,</span> <span class="nv">$target</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div><p>:::</p>
<p><strong>[6] 删除多级目录</strong></p>
<p>::: danger</p>
<p>目录的删除操作一定要小心！避免目录层级错误导致的误删</p>
<p>:::</p>
<p>::: details</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="sd">/**删除多级目录
</span><span class="sd"> * 千万小心！！！
</span><span class="sd"> * @param string $dir
</span><span class="sd"> * @return bool
</span><span class="sd"> */</span>
<span class="k">function</span> <span class="nf">del_dir</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$dir</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">is_dir</span><span class="p">(</span><span class="nv">$dir</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="nx">glob</span><span class="p">(</span><span class="nv">$dir</span> <span class="o">.</span> <span class="s2">&#34;/*&#34;</span><span class="p">)</span> <span class="k">as</span> <span class="nv">$file</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">is_file</span><span class="p">(</span><span class="nv">$file</span><span class="p">)</span> <span class="o">?</span> <span class="nx">unlink</span><span class="p">(</span><span class="nv">$file</span><span class="p">)</span> <span class="o">:</span> <span class="nx">del_dir</span><span class="p">(</span><span class="nv">$file</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">rmdir</span><span class="p">(</span><span class="nv">$dir</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><p>:::</p>
<p>::: tip</p>
<p><strong>目录的移动</strong> 等价于复制+删除</p>
<p>:::</p>
<h2 id="命名空间">命名空间</h2>
<blockquote>
<p>在电脑的文件系统中，fin.txt这个文件在一个文件夹下不能同时存在两份，只能另建文件夹将二者分开，这就类似命名空间的概念，利用命名空间可以将类，函数或者常量的同名者分隔开来，避免产生冲突</p>
</blockquote>
<h3 id="几个关键字">几个关键字</h3>
<h4 id="1-namespace">1. namespace</h4>
<p>用<code>namespace</code>关键字声明一个类的命名空间，如果当做文件系统来看就是讲文件放到某个确定的位置，可以通过层级的文件夹路径找到。</p>
<p>::: tip</p>
<p>标准规范就是，类的命名空间与其所处文件夹名对应</p>
<p>:::</p>
<p>::: danger</p>
<p>namespace之前的代码都不会执行！</p>
<p>:::</p>
<h4 id="2use">2.use</h4>
<p>use关键字导入声明了命名空间的类等，所有支持命名空间的PHP版本支持三种别名或导入方式：为类名称使用别名、为接口使用别名或为命名空间名称使用别名。PHP 5.6开始允许导入函数或常量或者为它们设置别名。</p>
<p>具体方法：</p>
<p>::: details</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="k">namespace</span> <span class="nx">foo</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">My\Full\Classname</span> <span class="k">as</span> <span class="nx">Another</span><span class="p">;</span>

<span class="c1">// 下面的例子与 use My\Full\NSname as NSname 相同
</span><span class="c1"></span><span class="k">use</span> <span class="nx">My\Full\NSname</span><span class="p">;</span>

<span class="c1">// 导入一个全局类
</span><span class="c1"></span><span class="k">use</span> <span class="nx">ArrayObject</span><span class="p">;</span>

<span class="c1">// importing a function (PHP 5.6+)
</span><span class="c1"></span><span class="k">use</span> <span class="k">function</span> <span class="nf">My\Full\functionName</span><span class="p">;</span>

<span class="c1">// aliasing a function (PHP 5.6+)
</span><span class="c1"></span><span class="k">use</span> <span class="k">function</span> <span class="nf">My\Full\functionName</span> <span class="k">as</span> <span class="nx">func</span><span class="p">;</span>

<span class="c1">// importing a constant (PHP 5.6+)
</span><span class="c1"></span><span class="k">use</span> <span class="k">const</span> <span class="no">My\Full\CONSTANT</span><span class="p">;</span>
</code></pre></div><p>:::</p>
<h4 id="3自动加载">3.自动加载</h4>
<p>::: tip</p>
<p>如果两个类定义在不同的php文件中，使用use声明命名空间或者类之后，还需要用include/require引入进来，略微有点麻烦，我们希望有种自动处理的方法，使得我们只需要使用use声明，而include自动完成！</p>
<p>:::</p>
<p><strong>方法1 函数实现</strong></p>
<p><code>spl_autoload_register()</code> 函数当使用use声明的命名空间类不存在时，会，自动调用该函数</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span>
<span class="k">namespace</span> <span class="nx">App</span><span class="p">;</span>

<span class="nx">spl_autoload_register</span><span class="p">(</span>
    <span class="k">function</span> <span class="p">(</span><span class="nv">$name</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$file</span> <span class="o">=</span> <span class="nx">str_replace</span><span class="p">(</span><span class="s2">&#34;</span><span class="se">\\</span><span class="s2">&#34;</span><span class="p">,</span> <span class="s2">&#34;/&#34;</span><span class="p">,</span> <span class="nv">$name</span><span class="p">)</span><span class="o">.</span><span class="s2">&#34;.php&#34;</span><span class="p">;</span>
        <span class="k">require</span> <span class="nv">$file</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">);</span>

<span class="k">use</span> <span class="nx">App\Module\Shop\Server\Member</span><span class="p">;</span>
<span class="nx">Member</span><span class="o">::</span><span class="na">show</span><span class="p">();</span>
</code></pre></div><p><strong>方法2 面向对象形式</strong></p>
<p>::: warning</p>
<p>自动加载类需要与使用者在同一命名空间下，或者使用use&amp;include正确引入</p>
<p>:::</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="c1">//Autoload.php类
</span><span class="c1"></span><span class="k">namespace</span> <span class="nx">App</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Autoload</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">boot</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nx">spl_autoload_register</span><span class="p">([</span><span class="k">new</span> <span class="nx">self</span><span class="p">,</span> <span class="s2">&#34;autoload&#34;</span><span class="p">]);</span><span class="c1">//注意传参方式
</span><span class="c1"></span>    <span class="p">}</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">autoload</span><span class="p">(</span><span class="nv">$name</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$file</span> <span class="o">=</span> <span class="nx">str_replace</span><span class="p">(</span><span class="s2">&#34;</span><span class="se">\\</span><span class="s2">&#34;</span><span class="p">,</span> <span class="s2">&#34;/&#34;</span><span class="p">,</span> <span class="nv">$name</span><span class="p">)</span><span class="o">.</span><span class="s2">&#34;.php&#34;</span><span class="p">;</span>
        <span class="k">require</span> <span class="nv">$file</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nx">Autoload</span><span class="o">::</span><span class="na">boot</span><span class="p">();</span><span class="c1">//自动调用静态方法，引入之后不需调用
</span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="c1">//use.php
</span><span class="c1"></span><span class="k">namespace</span> <span class="nx">App</span><span class="p">;</span>
<span class="k">include</span> <span class="s2">&#34;Autoload.php&#34;</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">App\Module\Shop\Server\Member</span><span class="p">;</span>

<span class="nx">Member</span><span class="o">::</span><span class="na">show</span><span class="p">();</span>
</code></pre></div><p><strong>方法3 第三方工具—composer</strong></p>
<p>初始化</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">composer init
</code></pre></div><p>修改配置</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="s2">&#34;autoload&#34;</span><span class="err">:</span><span class="p">{</span>
    <span class="nt">&#34;psr-4&#34;</span><span class="p">:{</span>
    <span class="nt">&#34;App\\&#34;</span><span class="p">:</span><span class="s2">&#34;App&#34;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>构建</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">conposer build
</code></pre></div><p>然后引入生成的vendor文件夹下的autoload.php即可！</p>
<h2 id="面向对象">面向对象</h2>
<blockquote>
<p>使用类的方式实现某一功能，通过继承让代码变得更易维护</p>
</blockquote>
<h3 id="类中的量方法">类中的量&amp;方法</h3>
<h4 id="静态变量方法">静态变量&amp;方法</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="k">class</span> <span class="nc">User</span><span class="p">{</span>
    <span class="k">protected</span> <span class="k">static</span> <span class="nv">$name</span><span class="o">=</span><span class="s2">&#34;fin&#34;</span><span class="p">;</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">show</span><span class="p">(){</span>
        <span class="k">return</span> <span class="nx">self</span><span class="o">::</span><span class="nv">$name</span><span class="p">;</span><span class="c1">//self 关键字表示当前对象，
</span><span class="c1"></span>    <span class="p">}</span>
<span class="p">}</span>
<span class="nv">$u</span><span class="o">=</span><span class="k">new</span> <span class="nx">User</span><span class="p">();</span>
<span class="k">echo</span> <span class="nv">$u</span><span class="o">-&gt;</span><span class="na">show</span><span class="p">();</span>
<span class="k">echo</span> <span class="nx">User</span><span class="o">::</span><span class="na">show</span><span class="p">();</span>
</code></pre></div><p>静态方法/属性通过<code>类名::方法/属性</code>的方式调用</p>
<h4 id="常量">常量</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="k">class</span> <span class="nc">Model</span>
<span class="p">{</span>
    <span class="k">const</span> <span class="no">EXISTS_VALUE</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">echo</span> <span class="nx">Model</span><span class="o">::</span><span class="na">EXISTS_VALUE</span><span class="p">;</span>
<span class="nv">$m</span><span class="o">=</span><span class="k">new</span> <span class="nx">Model</span><span class="p">();</span>
<span class="k">echo</span> <span class="nv">$m</span><span class="o">::</span><span class="na">EXISTS_VALUE</span><span class="p">;</span>
</code></pre></div><ul>
<li>
<p>常量名规范上全部大写</p>
</li>
<li>
<p>常量永远不会被改变</p>
</li>
</ul>
<h4 id="privateprotect的区别">private&amp;protect的区别</h4>
<p><strong>主要区别在继承上：</strong></p>
<ul>
<li><code>protect</code>定义的方法，继承后能在子类中直接访问</li>
<li><code>private</code>只供当前对象使用，继承后的子类无法访问</li>
</ul>
<h4 id="构造函数与解析函数魔术方法">构造函数与解析函数(魔术方法)</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="k">class</span> <span class="nc">Test</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">echo</span> <span class="s2">&#34;__construct&#34;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="fm">__destruct</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">echo</span> <span class="s2">&#34;__destruct&#34;</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="cm">/*  public function __run()
</span><span class="cm">    {
</span><span class="cm">        echo &#34;__run&#34;;
</span><span class="cm">    }*/</span>
<span class="p">}</span>

<span class="k">new</span> <span class="nx">Test</span><span class="p">();</span>
</code></pre></div><p><strong>说明：</strong></p>
<ul>
<li>两者都会在new对象的时候自动执行</li>
<li>名称不可以自定义</li>
<li>前者一般用来赋值操作，后者做一些资源的释放等</li>
</ul>
<h3 id="继承特殊类">继承&amp;特殊类</h3>
<h4 id="单链式继承">单链式继承</h4>
<blockquote>
<p>用到<code>extends</code>关键字</p>
</blockquote>
<p>🎈<strong>防止继承后子类覆盖父类方法</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="k">class</span> <span class="nc">Father</span><span class="p">{</span>
    <span class="k">private</span> <span class="k">static</span> <span class="nv">$name</span><span class="o">=</span><span class="s2">&#34;jqf&#34;</span><span class="p">;</span>
    <span class="k">public</span> <span class="k">final</span> <span class="k">function</span> <span class="nf">show</span><span class="p">(){</span>
        <span class="k">return</span> <span class="nx">Father</span><span class="o">::</span><span class="nv">$name</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="k">class</span> <span class="nc">Child</span> <span class="k">extends</span> <span class="nx">Father</span><span class="p">{</span>
<span class="c1">//    public function show(){}//Cannot override final method
</span><span class="c1"></span><span class="p">}</span>
</code></pre></div><p>利用<code>final</code>关键字定义父类中的方法，就可以避免父类方法被重写</p>
<h4 id="多继承">多继承</h4>
<blockquote>
<p>用<code>trait</code> 关键字定义类，用<code>use</code>引入</p>
</blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">trait</span> <span class="nx">Commit</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">publish</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="no">__METHOD__</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">trait</span> <span class="nx">Log</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">show</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="no">__METHOD__</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">Topic</span>
<span class="p">{</span>
    <span class="k">use</span> <span class="nx">Commit</span><span class="p">,</span> <span class="nx">Log</span><span class="p">;</span>
<span class="p">}</span>

<span class="nv">$topic</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Topic</span><span class="p">;</span>
<span class="k">echo</span> <span class="nv">$topic</span><span class="o">-&gt;</span><span class="na">publish</span><span class="p">();</span>
<span class="k">echo</span> <span class="s2">&#34;&lt;hr&gt;&#34;</span><span class="p">;</span>
<span class="k">echo</span> <span class="nv">$topic</span><span class="o">-&gt;</span><span class="na">show</span><span class="p">();</span>
</code></pre></div><p>🎈 <strong>多继承后的优先级</strong></p>
<p>当继承后方法名重复时，优先级为:<code>子类方法 &gt; trait &gt; extend</code></p>
<p>🎈 <strong>多继承方法名冲突问题</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="c1">//类中方法名冲突，通过替换+改名解决
</span><span class="c1"></span><span class="k">use</span> <span class="nx">Commit</span><span class="p">,</span> <span class="nx">Log</span><span class="p">{</span>
    <span class="nx">Commit</span><span class="o">::</span><span class="na">show</span> <span class="nx">insteadof</span>  <span class="nx">Log</span><span class="p">;</span><span class="c1">//设置优先级
</span><span class="c1"></span>    <span class="nx">Log</span><span class="o">::</span><span class="na">show</span> <span class="k">as</span> <span class="nx">export</span><span class="p">;</span><span class="c1">//优先级低的改名
</span><span class="c1"></span><span class="p">}</span>
</code></pre></div><p>设置优先级→优先级低的改名</p>
<p>🎈 <strong>重新定义父类方法的访问权限</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="k">use</span> <span class="nx">Commit</span><span class="p">{</span>
    <span class="nx">Commit</span><span class="o">::</span><span class="na">publish</span> <span class="k">as</span> <span class="k">protected</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div><p><code>protect</code>与<code>public</code>之间相互转换</p>
<h4 id="特殊类">特殊类</h4>
<table>
<thead>
<tr>
<th>特殊类</th>
<th>使用</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>抽象类</td>
<td><code>abstract</code></td>
<td>子类必须实现其中声明的抽象方法</td>
</tr>
<tr>
<td>接口</td>
<td><code>interface</code></td>
<td>类似一个标准,凡是通过 <code>implements</code> 关键字使用该接口的类，必须实现其中的所有方法</td>
</tr>
<tr>
<td>特征类</td>
<td><code>trait</code></td>
<td>定义类用于多继承</td>
</tr>
</tbody>
</table>
<h3 id="魔术方法">魔术方法</h3>
<blockquote>
<p>魔术方法定义在父类当中，由子类触发</p>
</blockquote>
<h4 id="属性相关">属性相关</h4>
<table>
<thead>
<tr>
<th>方法</th>
<th>调用条件</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>__get($name)</code></td>
<td>获取对象中的<strong>不可访问或不存在</strong>的变量时会自动调用</td>
</tr>
<tr>
<td><code>__set($name,$value)</code></td>
<td>给对象设置<strong>不可访问</strong>值会自动调用</td>
</tr>
<tr>
<td><code>__unset($name)</code></td>
<td>删除对象中的<strong>不可访问或不存在</strong>变量会调用</td>
</tr>
<tr>
<td><code>__isset($name)</code></td>
<td>判断对象中是否存在某变量调用</td>
</tr>
</tbody>
</table>
<h4 id="方法相关">方法相关</h4>
<table>
<thead>
<tr>
<th>方法</th>
<th>调用条件</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>__call($name, $arguments)</code></td>
<td>子类实例化调用的方法在子类中不存在时</td>
</tr>
<tr>
<td><code>__callStatic($name,$arguments)</code></td>
<td>子类静态方法不存在时</td>
</tr>
</tbody>
</table>
<h4 id="特殊">特殊</h4>
<table>
<thead>
<tr>
<th>方法</th>
<th>调用条件</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>__construct()</code></td>
<td><code>new</code> 即调用</td>
</tr>
<tr>
<td><code>__destruct()</code></td>
<td><code>new</code> 即调用</td>
</tr>
<tr>
<td><code>__toString</code></td>
<td>直接输出对象引用，不会产生错误，自动调用该方法,输出该方法中返回的字符串</td>
</tr>
</tbody>
</table>
<h2 id="错误异常处理">错误&amp;异常处理</h2>
<h3 id="错误">错误</h3>
<blockquote>
<p>通过<code>error_reporting(0)</code>屏蔽系统默认的所有错误处理，然后通过<code>set_error_handler</code>设置自定义错误处理函数，第一个参数为函数，第二个为要处理的错误，默认为处理所有错误(E_ALL | E_STRICT),[<a class="link" href="https://www.php.net/manual/zh/function.set-error-handler.php"  target="_blank" rel="noopener"
    >官网</a>]</p>
</blockquote>
<h4 id="错误处理函数的参数">错误处理函数的参数</h4>
<table>
<thead>
<tr>
<th>参数</th>
<th>是否可选(Y/N)</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>$errcode</code></td>
<td>N</td>
<td>是一个 integer，包含了错误的级别(<a class="link" href="https://www.php.net/manual/zh/errorfunc.constants.php"  target="_blank" rel="noopener"
    >错误码</a>)</td>
</tr>
<tr>
<td><code>$errmsg</code></td>
<td>N</td>
<td>是一个string，包含了错误的信息</td>
</tr>
<tr>
<td><code>$errfile</code></td>
<td>Y</td>
<td>是一个string，包含了发生错误的文件名</td>
</tr>
<tr>
<td><code>$errline</code></td>
<td>Y</td>
<td>是一个 integer，包含了错误发生的行号</td>
</tr>
</tbody>
</table>
<blockquote>
<p>然后通过<code>error_log</code>函数选择将错误相关的信息发送到某个地方</p>
</blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="nx">error_log</span> <span class="p">(</span> <span class="nx">string</span> <span class="nv">$message</span> <span class="p">[,</span> <span class="nx">int</span> <span class="nv">$message_type</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">[,</span> <span class="nx">string</span> <span class="nv">$destination</span> <span class="p">[,</span> <span class="nx">string</span> <span class="nv">$extra_headers</span> <span class="p">]]]</span> <span class="p">)</span> <span class="o">:</span> <span class="nx">bool</span>
</code></pre></div><table>
<thead>
<tr>
<th>message_type</th>
<th>操作</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td><code>message</code> 发送到 PHP 的系统日志，使用 操作系统的日志机制或者一个文件，取决于 <a class="link" href="https://www.php.net/manual/zh/errorfunc.configuration.php#ini.error-log"  target="_blank" rel="noopener"
    >error_log</a> 指令设置了什么。 这是个默认的选项。</td>
</tr>
<tr>
<td>1</td>
<td><code>message</code> 发送到参数 <code>destination</code> 设置的邮件地址。 第四个参数 <code>extra_headers</code> 只有在这个类型里才会被用到。</td>
</tr>
<tr>
<td>2</td>
<td>不再是一个选项。</td>
</tr>
<tr>
<td>3</td>
<td><code>message</code> 被发送到位置为 <code>destination</code> 的文件里。 字符 <code>message</code> 不会默认被当做新的一行。</td>
</tr>
<tr>
<td>4</td>
<td><code>message</code> 直接发送到 SAPI 的日志处理程序中。</td>
</tr>
</tbody>
</table>
<h3 id="异常">异常</h3>
<blockquote>
<p>异常处理不同于错误，异常必须是使用<code>throw</code> 抛出异常，然后才能被<code>try catch</code> 捕获</p>
</blockquote>
<h4 id="自定义异常的处理">自定义异常的处理</h4>
<h5 id="依赖方法">依赖方法</h5>
<p>👉 <code>set_exception_handler</code> [<a class="link" href="https://www.php.net/manual/zh/function.set-exception-handler.php"  target="_blank" rel="noopener"
    >官网</a>]</p>
<blockquote>
<p>设置用户自定义的异常处理函数</p>
</blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="c1">//范例
</span><span class="c1"></span><span class="o">&lt;?</span><span class="nx">php</span>
<span class="k">function</span> <span class="nf">exception_handler</span><span class="p">(</span><span class="nv">$exception</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">echo</span> <span class="s2">&#34;Uncaught exception: &#34;</span> <span class="p">,</span> <span class="nv">$exception</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">(),</span> <span class="s2">&#34;</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">set_exception_handler</span><span class="p">(</span><span class="s1">&#39;exception_handler&#39;</span><span class="p">);</span>

<span class="k">throw</span> <span class="k">new</span> <span class="nx">Exception</span><span class="p">(</span><span class="s1">&#39;Uncaught Exception&#39;</span><span class="p">);</span>
<span class="k">echo</span> <span class="s2">&#34;Not Executed</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">;</span>
<span class="cp">?&gt;</span><span class="err">
</span></code></pre></div><p>在<code>exception_handler</code>可以接收到产生异常后的异常处理类，如果没有自定义异常处理类，默认为<code>Exception</code>类</p>
<h5 id="基本思路">基本思路</h5>
<blockquote>
<p>自定义继承自<code>Exception</code>的异常处理的类，让其中默认存在<code>render()</code> 处理函数(用来区分默认的异常处理类<code>Exception</code>)</p>
</blockquote>
<blockquote>
<p>定义异常监测类，其作用为执行<code>set_exception_handler</code>，然后在其设置的<code>exception_handler</code>函数中做判断：🎈如果该函数接受的参数(异常处理类)中存在<code>render()</code>函数，则该异常由自定义的异常处理类抛出，调用该异常处理类的<code>render()</code> 函数即可；🎈如果不存在<code>render()</code>函数，说明该异常没有自定义的异常处理类(是通过<code>throw new Exceprtion()</code> 抛出的异常)，再做处理即可；</p>
</blockquote>
<blockquote>
<p>然后定义具体逻辑，在具体位置判断需要抛出哪种异常即可。</p>
</blockquote>
<h4 id="本例实现思路">本例实现思路</h4>
<blockquote>
<p>本例主要实现两个模块，视图渲染+表单验证</p>
</blockquote>
<h5 id="-视图渲染">⚔ 视图渲染</h5>
<blockquote>
<p>主要作用是加载位于<code>Views</code>文件夹下的每个页面</p>
</blockquote>
<p><strong>主要逻辑</strong></p>
<blockquote>
<p>在入口文件<code>index.php</code>中引入定义在<code>bootstrap.php</code> 中的<code>composer</code>自动加载功能(使用use引入类，会自动调用include)，以及异常监测类。其中，异常检测类中的<code>set_exception_handler</code>自动执行</p>
</blockquote>
<blockquote>
<p>然后使用<code>Server\View</code>视图渲染类的<code>make</code>方法加载<code>Views</code> 下的<code>index.blade.php</code>文件。存在，则通过<code>include</code>引入，如果不存在会抛出<code>ViewException</code>异常</p>
</blockquote>
<blockquote>
<p>一旦抛出<code>ViewException</code>异常，就会通过<code>View</code>类的<code>make</code>方法加载<code>error.blade.php</code>，这个文件一定是要存在的</p>
</blockquote>
<h5 id="-表单验证">⚔ 表单验证</h5>
<blockquote>
<p>提交表单到后台，通过验证类判断是否能通过验证，不能通过则携带着提示信息返回表单页面，能通过则加载成功的页面</p>
</blockquote>
<p><strong>主要逻辑</strong></p>
<blockquote>
<p>视图渲染模块无异常后会转到<code>index.blade.php</code>页面，其中含有展示在前端的表单，提交至<code>controller.php</code></p>
</blockquote>
<blockquote>
<p><code>controller.php</code> 也需要引入<code>bootstrap.php</code> ，然后通过表单验证类<code>Server\ValidateException</code>进行验证。无异常执行下一句，即通过<code>View</code> 类加载成功页面<code>success.blade.php</code>.否则：</p>
</blockquote>
<blockquote>
<p>表单验证类<code>Server\ValidateException.php</code>中判断<code>$_POST</code>的内容，本例只判断是否为空，如果为空抛出表单验证异常<code>ValidateException</code>，<code>controller.php</code>中的后续不再执行</p>
</blockquote>
<blockquote>
<p>一旦抛出<code>ValidateException</code>表单验证异常，会将<code>ValidateException.php</code>中抛出异常时的消息存到SESSION中，然后通过<code>header(&quot;location:index.php&quot;)</code>返回入口文件路径，即重新开始输入表单。在表单中可以把存放在SESSION中的异常消息展示给用户作为提示。</p>
</blockquote>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/php/">PHP</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
        <link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css"integrity="sha384-RZU/ijkSsFbcmivfdRBQDtwuwVqK7GMOw6IMvKyeWL2K5UAlyp6WonmB8m7Jd0Hn"crossorigin="anonymous"
            ><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.js"integrity="sha384-pK1WpvzWVBQiP0/GjnvRxV4mOb0oxFuyRxJlk6vVw146n3egcN5C925NCP7a7BY8"crossorigin="anonymous"
                defer="true"
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/contrib/auto-render.min.js"integrity="sha384-vZTG03m&#43;2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl"crossorigin="anonymous"
                defer="true"
                >
            </script><script>
    window.addEventListener("DOMContentLoaded", () => {
        renderMathInElement(document.querySelector(`.article-content`), {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false },
                { left: "\\[", right: "\\]", display: true }
            ]
        });})
</script>
    
</article>

    <aside class="related-contents--wrapper">
    
    
        <h2 class="section-title">Related contents</h2>
        <div class="related-contents">
            <div class="flex article-list--tile">
                
                    
<article class="has-image">
    <a href="/p/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0%E7%9F%A9%E9%98%B5/">
        
        
            <div class="article-image">
                
                    <img src="https://picsum.photos/seed/matrix/640/" loading="lazy" data-key="" data-hash="https://picsum.photos/seed/matrix/640/"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">线性代数——矩阵</h2>
        </div>
    </a>
</article>
                
                    
<article class="has-image">
    <a href="/p/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0%E8%A1%8C%E5%88%97%E5%BC%8F/">
        
        
            <div class="article-image">
                
                    <img src="https://picsum.photos/seed/det/640/360" loading="lazy" data-key="" data-hash="https://picsum.photos/seed/det/640/360"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">线性代数——行列式</h2>
        </div>
    </a>
</article>
                
                    
<article class="has-image">
    <a href="/p/%E5%AF%BB%E5%9D%80%E6%96%B9%E5%BC%8F/">
        
        
            <div class="article-image">
                
                    <img src="https://picsum.photos/seed/xunzhifangsh/640/360" loading="lazy" data-key="" data-hash="https://picsum.photos/seed/xunzhifangsh/640/360"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">寻址方式</h2>
        </div>
    </a>
</article>
                
                    
<article class="has-image">
    <a href="/p/%E5%A4%96%E9%83%A8%E6%8E%92%E5%BA%8F%E7%9B%B8%E5%85%B3/">
        
        
            <div class="article-image">
                
                    <img src="https://picsum.photos/seed/waibupaixu/640/360" loading="lazy" data-key="" data-hash="https://picsum.photos/seed/waibupaixu/640/360"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">外部排序相关</h2>
        </div>
    </a>
</article>
                
                    
<article class="has-image">
    <a href="/p/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E7%9B%B8%E5%85%B3/">
        
        
            <div class="article-image">
                
                    <img src="https://picsum.photos/seed/paixu/640/360" loading="lazy" data-key="" data-hash="https://picsum.photos/seed/paixu/640/360"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">排序算法相关</h2>
        </div>
    </a>
</article>
                
            </div>
        </div>
    
</aside>

     
     
        
    <script src='//cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js'></script>
<div id="waline" class="waline-container"></div>
<style>
    .waline-container {
        background-color: var(--card-background);
        border-radius: var(--card-border-radius);
        box-shadow: var(--shadow-l1);
        padding: var(--card-padding);
    }
    .waline-container .vcount {
        color: var(--card-text-color-main);
    }
</style><script>
    
    new Waline({"avatar":"robohash","dark":"html[data-scheme=\"dark\"]","el":"#waline","emoji":["https://cdn.jsdelivr.net/gh/walinejs/emojis/weibo","https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/bilibili","https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/qq","https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/tieba","https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/tw-emoji"],"highlight":true,"locale":{"admin":"Admin"},"placeholder":"说点什么༼ つ ◕_◕ ༽つ","requiredMeta":["name","email","url"],"serverURL":"https://waline-q3l7of5hj-fintinger.vercel.app/","visitor":true});
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2018 - 
        
        2021 Archai &#39;s blog
    </section>
    
    <section class="powerby">
        
            Archai <br/>
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="2.5.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>
</footer>

    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer="true"
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer="true"
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css"integrity="sha256-c0uckgykQ9v5k&#43;IqViZOZKc47Jn7KQil4/MP3ySA3F8="crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css"integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE="crossorigin="anonymous"
            >

            </main>
    
        <aside class="sidebar right-sidebar sticky">
            <section class="widget archives">
                <div class="widget-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



                </div>
                <h2 class="widget-title section-title">Table of contents</h2>
                
                <div class="widget--toc">
                    <nav id="TableOfContents">
  <ol>
    <li><a href="#基本语法">基本语法</a>
      <ol>
        <li><a href="#输出语句">输出语句</a></li>
        <li><a href="#变量常量">变量&amp;常量</a></li>
        <li><a href="#三元表达式及使用">三元表达式及@使用</a></li>
        <li><a href="#字符串相关函数">字符串相关函数</a>
          <ol>
            <li><a href="#定界符">定界符</a></li>
            <li><a href="#字符串连接">字符串连接</a></li>
            <li><a href="#字符串长度">字符串长度</a></li>
            <li><a href="#字符串格式">字符串格式</a></li>
            <li><a href="#与数组相互转化">与数组相互转化</a></li>
            <li><a href="#截取字符串">截取字符串</a></li>
            <li><a href="#md5加密">md5加密</a></li>
          </ol>
        </li>
        <li><a href="#引入模块">引入模块</a></li>
        <li><a href="#函数相关">函数相关</a>
          <ol>
            <li><a href="#点语法">点语法</a></li>
            <li><a href="#传址传值">传址&amp;传值</a></li>
            <li><a href="#严格模式">严格模式</a></li>
            <li><a href="#php标准的函数">php标准的函数</a></li>
            <li><a href="#好用的变量函数">好用的变量函数！</a></li>
          </ol>
        </li>
        <li><a href="#数组相关">数组相关</a>
          <ol>
            <li><a href="#指针读取数组">指针读取数组</a></li>
            <li><a href="#list">list()</a></li>
            <li><a href="#操作数组">操作数组</a></li>
            <li><a href="#数组增删操作">数组增删操作</a></li>
            <li><a href="#其他方法类似js中">其他方法（类似JS中）</a></li>
          </ol>
        </li>
        <li><a href="#时间相关">时间相关</a>
          <ol>
            <li><a href="#基本操作">基本操作</a></li>
            <li><a href="#一些相关函数">一些相关函数</a></li>
            <li><a href="#内置时间类">内置时间类</a></li>
          </ol>
        </li>
        <li><a href="#正则表达式">正则表达式</a></li>
      </ol>
    </li>
    <li><a href="#cookie">COOKIE</a>
      <ol>
        <li><a href="#设置">设置</a></li>
      </ol>
    </li>
    <li><a href="#session">SESSION</a>
      <ol>
        <li><a href="#概述">概述</a></li>
        <li><a href="#基本使用">基本使用</a></li>
        <li><a href="#配置">配置</a>
          <ol>
            <li><a href="#session储存目录">SESSION储存目录</a></li>
            <li><a href="#自定义namevalue">自定义Name&amp;Value</a></li>
          </ol>
        </li>
        <li><a href="#gc垃圾回收机制">GC垃圾回收机制</a>
          <ol>
            <li><a href="#过期时间">过期时间</a></li>
            <li><a href="#调用概率">调用概率</a></li>
          </ol>
        </li>
        <li><a href="#自定义session处理引擎">自定义SESSION处理引擎</a>
          <ol>
            <li><a href="#使用">使用</a></li>
            <li><a href="#定义">定义</a></li>
            <li><a href="#实例">实例</a></li>
            <li><a href="#whatt-more">What&rsquo;t more💭</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#文件操作">文件操作</a>
      <ol>
        <li><a href="#指针操作函数">指针操作函数</a></li>
        <li><a href="#文件打开与写入操作fopen函数详解">文件打开与写入操作fopen函数详解：</a></li>
        <li><a href="#其他操作函数">其他操作函数</a></li>
        <li><a href="#快速读取写入文件">快速读取&amp;写入文件</a></li>
        <li><a href="#文件复制移动">文件复制移动</a></li>
        <li><a href="#目录操作函数">目录操作函数</a></li>
        <li><a href="#共享锁和独占锁">共享锁和独占锁</a></li>
        <li><a href="#关于文件和目录操作常用的一些函数">关于文件和目录操作常用的一些函数</a></li>
      </ol>
    </li>
    <li><a href="#命名空间">命名空间</a>
      <ol>
        <li><a href="#几个关键字">几个关键字</a>
          <ol>
            <li><a href="#1-namespace">1. namespace</a></li>
            <li><a href="#2use">2.use</a></li>
            <li><a href="#3自动加载">3.自动加载</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#面向对象">面向对象</a>
      <ol>
        <li><a href="#类中的量方法">类中的量&amp;方法</a>
          <ol>
            <li><a href="#静态变量方法">静态变量&amp;方法</a></li>
            <li><a href="#常量">常量</a></li>
            <li><a href="#privateprotect的区别">private&amp;protect的区别</a></li>
            <li><a href="#构造函数与解析函数魔术方法">构造函数与解析函数(魔术方法)</a></li>
          </ol>
        </li>
        <li><a href="#继承特殊类">继承&amp;特殊类</a>
          <ol>
            <li><a href="#单链式继承">单链式继承</a></li>
            <li><a href="#多继承">多继承</a></li>
            <li><a href="#特殊类">特殊类</a></li>
          </ol>
        </li>
        <li><a href="#魔术方法">魔术方法</a>
          <ol>
            <li><a href="#属性相关">属性相关</a></li>
            <li><a href="#方法相关">方法相关</a></li>
            <li><a href="#特殊">特殊</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#错误异常处理">错误&amp;异常处理</a>
      <ol>
        <li><a href="#错误">错误</a>
          <ol>
            <li><a href="#错误处理函数的参数">错误处理函数的参数</a></li>
          </ol>
        </li>
        <li><a href="#异常">异常</a>
          <ol>
            <li><a href="#自定义异常的处理">自定义异常的处理</a></li>
            <li><a href="#本例实现思路">本例实现思路</a></li>
          </ol>
        </li>
      </ol>
    </li>
  </ol>
</nav>
                </div>
            </section>
        </aside>
    

        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js"integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g="crossorigin="anonymous"
                defer="false"
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>\

<script src="https://cdn.bootcdn.net/ajax/libs/clipboard.js/2.0.8/clipboard.js"></script>
<script>
    let pres = document.querySelectorAll("pre");
    let copy = `
<svg t="1628559239763" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4588" width="16" height="16"><path d="M756.537 170.667H109.532c-55.02 0-99.343 44.322-99.343 99.343v647.005c0 55.02 44.322 99.343 99.343 99.343h647.005c55.021 0 99.344-44.322 99.344-99.343V270.01c0-55.02-44.323-99.343-99.344-99.343z m22.926 746.348a22.83 22.83 0 0 1-22.926 22.925H109.532a22.83 22.83 0 0 1-22.925-22.925V270.01a22.83 22.83 0 0 1 22.925-22.925h647.005a22.83 22.83 0 0 1 22.926 22.925v647.005z" p-id="4589"></path><path d="M914.468 12.736H267.463c-20.888 0-38.21 17.322-38.21 38.21s17.322 38.208 38.21 38.208h647.005a22.83 22.83 0 0 1 22.925 22.926v647.005c0 20.887 17.321 38.209 38.209 38.209s38.209-17.322 38.209-38.21V112.08c0-55.021-44.322-99.344-99.343-99.344z" p-id="4590"></path></svg>`
    let tick = `
<svg t="1628558717330" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3410" width="16" height="16"><path d="M512 0C228.430769 0 0 228.430769 0 512s228.430769 512 512 512 512-228.430769 512-512S795.569231 0 512 0z m0 945.230769C271.753846 945.230769 78.769231 752.246154 78.769231 512S271.753846 78.769231 512 78.769231s433.230769 192.984615 433.230769 433.230769-192.984615 433.230769-433.230769 433.230769z" p-id="3411" fill="#07a35a"></path><path d="M716.8 330.830769l-208.738462 248.123077c-15.753846 15.753846-43.323077 19.692308-59.076923 7.876923L299.323077 472.615385c-15.753846-11.815385-43.323077-7.876923-55.138462 7.876923-11.815385 15.753846-7.876923 43.323077 7.876923 55.138461l149.661539 114.215385c19.692308 15.753846 47.261538 23.630769 74.830769 23.630769 35.446154 0 70.892308-15.753846 94.523077-43.323077l208.738462-248.123077c15.753846-15.753846 11.815385-43.323077-3.938462-55.138461-19.692308-15.753846-43.323077-15.753846-59.076923 3.938461z" p-id="3412" fill="#07a35a"></path></svg>`


    pres.forEach(e => {
        e.insertAdjacentHTML('beforeend', `<button class="cp_btn">` + copy + `</button>`)
    })
    let clp = new ClipboardJS('.cp_btn', {
        target: function (trigger) {
            return trigger.previousElementSibling;
        }
    });
    clp.on('success', function (e) {
        let clpEl=e;
        e.trigger.innerHTML = tick;
        e.trigger.parentElement.onmouseleave = _ => {
            clpEl.trigger.innerHTML = copy
            clpEl.clearSelection();
        }
        // console.info('Action:', e.action);
        // console.info('Text:', e.text);
        // console.info('Trigger:', e.trigger);
        // e.clearSelection();
    });

    clp.on('error', function (e) {
        console.error('Action:', e.action);
        console.error('Trigger:', e.trigger);
    });
</script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
